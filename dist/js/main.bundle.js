/*! For license information please see main.bundle.js.LICENSE.txt */
(()=>{"use strict";var n,e={306:(n,e,t)=>{t.d(e,{A:()=>s});var r=t(601),o=t.n(r),a=t(314),i=t.n(a)()(o());i.push([n.id,"/* Base */\n* {\n    box-sizing: border-box;\n    margin: 0;\n    padding: 0;\n  }\n  \n  body {\n    font-family: 'Open Sans', sans-serif;\n    line-height: 1.6;\n    color: #333;\n    background-color: #f8f9fa;\n  }\n  \n  /* Skip Link */\n  .skip-link {\n    position: absolute;\n    top: -50px;\n    left: 0;\n    background-color: #5c0449;\n    color: white;\n    padding: 10px;\n    z-index: 100;\n    text-decoration: none;\n  }\n  \n  .skip-link:focus {\n    top: 0;\n  }\n  \n  /* Header */\n  header {\n    background-color: #5c0449;\n    color: white;\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n  }\n  \n  .header-container {\n    max-width: 1200px;\n    margin: 0 auto;\n    padding: 1rem;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n  \n  header h1 {\n    font-size: 1.5rem;\n    margin: 0;\n  }\n  \n  /* Navigation */\n  nav ul {\n    display: flex;\n    list-style: none;\n  }\n  \n  nav li {\n    margin-left: 1.5rem;\n  }\n  \n  nav a {\n    color: white;\n    text-decoration: none;\n    font-weight: 500;\n    padding: 5px 10px;\n    border-radius: 5px;\n    transition: background-color 0.3s;\n  }\n  \n  nav a:hover {\n    background-color: rgba(255, 255, 255, 0.1);\n  }\n  \n  /* Main Content */\n  main {\n    max-width: 1200px;\n    margin: 2rem auto;\n    padding: 0 1rem;\n    min-height: calc(100vh - 180px);\n  }\n  \n  .content {\n    margin-bottom: 2rem;\n  }\n  \n  .content__heading {\n    font-size: 2rem;\n    color: #5c0449;\n    margin-bottom: 1.5rem;\n    border-bottom: 2px solid #be279e;\n    padding-bottom: 0.5rem;\n  }\n  \n  /* Story Items */\n  .stories {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n    gap: 2rem;\n    margin-bottom: 2rem;\n  }\n  \n  .story-item {\n    background-color: white;\n    border-radius: 10px;\n    overflow: hidden;\n    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n    transition: transform 0.3s, box-shadow 0.3s;\n  }\n  \n  .story-item:hover {\n    transform: translateY(-5px);\n    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);\n  }\n  \n  .story-item__header__poster {\n    width: 100%;\n    height: 200px;\n    object-fit: cover;\n  }\n  \n  .story-item__content {\n    padding: 1.5rem;\n  }\n  \n  .story-item__title {\n    margin: 0;\n    margin-bottom: 10px;\n  }\n  \n  .story-item__title a {\n    color: #5c0449;\n    text-decoration: none;\n    transition: color 0.3s;\n  }\n  \n  .story-item__title a:hover {\n    color: #be279e;\n  }\n  \n  .story-item__description {\n    color: #555;\n    margin-bottom: 15px;\n  }\n  \n  .story-item__date {\n    color: #777;\n    font-size: 0.85rem;\n  }\n  \n  /* Maps */\n  .map {\n    height: 400px;\n    border-radius: 10px;\n    margin-bottom: 2rem;\n    border: 2px solid #ddd;\n  }\n  \n /* Add Story Page Styles */\n.add-story-container {\n  display: flex;\n  justify-content: center;\n  padding: 2rem 1rem;\n  background-color: #f8f9fa;\n  min-height: calc(100vh - 180px);\n}\n\n.add-story-card {\n  width: 100%;\n  max-width: 800px;\n  background-color: white;\n  border-radius: 15px;\n  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);\n  overflow: hidden;\n  padding: 2rem;\n  margin-bottom: 2rem;\n}\n\n.add-story-header {\n  text-align: center;\n  margin-bottom: 2rem;\n}\n\n.add-story-header h2 {\n  color: #5c0449;\n  font-size: 1.8rem;\n  margin-bottom: 0.5rem;\n}\n\n.add-story-header p {\n  color: #5c0449;\n  font-size: 1rem;\n}\n\n/* Form Styling */\n.form-group {\n  margin-bottom: 1.8rem;\n}\n\n.form-group label {\n  display: block;\n  margin-bottom: 0.7rem;\n  font-weight: 600;\n  color: #5c0449;\n  font-size: 1rem;\n}\n\ntextarea {\n  width: 100%;\n  min-height: 150px;\n  padding: 15px;\n  border: 2px solid #e0e0e0;\n  border-radius: 8px;\n  font-family: inherit;\n  font-size: 1rem;\n  resize: vertical;\n  transition: border-color 0.3s, box-shadow 0.3s;\n}\n\ntextarea:focus {\n  border-color: #be279e;\n  box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);\n  outline: none;\n}\n\n/* Photo Styling */\n.photo-preview {\n  width: 100%;\n  height: 250px;\n  border: 2px dashed #e0e0e0;\n  border-radius: 8px;\n  background-color: #f9f9f9;\n  margin-bottom: 1rem;\n  position: relative;\n  overflow: hidden;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  transition: border-color 0.3s;\n}\n\n.photo-preview:hover {\n  border-color: #be279e;\n}\n\n.photo-preview img {\n  max-width: 100%;\n  max-height: 100%;\n  object-fit: contain;\n}\n\n.photo-placeholder {\n  text-align: center;\n  color: #95a5a6;\n}\n\n.photo-placeholder i {\n  font-size: 3rem;\n  margin-bottom: 1rem;\n}\n\n.photo-placeholder p {\n  font-size: 0.9rem;\n}\n\n.btn-remove-photo {\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  background-color: rgba(255, 255, 255, 0.8);\n  border: none;\n  border-radius: 50%;\n  width: 36px;\n  height: 36px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: #e74c3c;\n  cursor: pointer;\n  transition: background-color 0.3s;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n}\n\n.btn-remove-photo:hover {\n  background-color: white;\n  color: #c0392b;\n}\n\n.photo-buttons {\n  display: flex;\n  gap: 1rem;\n  margin-bottom: 1rem;\n}\n\n.btn-photo {\n  flex: 1;\n  padding: 12px;\n  background-color: #f8f9fa;\n  border: 1px solid #e0e0e0;\n  border-radius: 8px;\n  color: #2c3e50;\n  font-size: 0.9rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.3s;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 8px;\n}\n\n.btn-photo:hover {\n  background-color: #e0e0e0;\n}\n\n.btn-photo i {\n  font-size: 1rem;\n}\n\n.camera {\n  width: 100%;\n  height: 300px;\n  border-radius: 8px;\n  margin-bottom: 1rem;\n  background-color: #000;\n}\n\n.btn-capture {\n  width: 100%;\n  padding: 12px;\n  background-color: #e74c3c;\n  border: none;\n  border-radius: 8px;\n  color: white;\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: background-color 0.3s;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 8px;\n}\n\n.btn-capture:hover {\n  background-color: #c0392b;\n}\n\n/* Map Styling */\n.map {\n  height: 350px;\n  border-radius: 10px;\n  margin-bottom: 1rem;\n  border: 2px solid #e0e0e0;\n  overflow: hidden;\n}\n\n.selected-location {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 10px 15px;\n  background-color: #f8f9fa;\n  border-radius: 8px;\n  font-size: 0.9rem;\n  color: #5c0449;\n}\n\n.selected-location i {\n  color: #e74c3c;\n  font-size: 1.2rem;\n}\n\n.btn-reset {\n  margin-left: auto;\n  background: none;\n  border: none;\n  color: #7f8c8d;\n  cursor: pointer;\n  padding: 5px;\n  font-size: 0.8rem;\n  border-radius: 50%;\n  transition: background-color 0.3s;\n}\n\n.btn-reset:hover {\n  background-color: #e0e0e0;\n  color: #5c0449;\n}\n\n/* Form Actions */\n.form-actions {\n  display: flex;\n  justify-content: flex-end;\n  gap: 1rem;\n  margin-top: 2rem;\n}\n\n.btn-secondary {\n  padding: 12px 20px;\n  background-color: #f8f9fa;\n  border: 1px solid #e0e0e0;\n  border-radius: 8px;\n  color: #5c0449;\n  font-size: 1rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.3s;\n}\n\n.btn-secondary:hover {\n  background-color: #e0e0e0;\n}\n\n.btn-primary {\n  padding: 12px 25px;\n  background-color: #be279e;\n  border: none;\n  border-radius: 8px;\n  color: white;\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: background-color 0.3s;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  box-shadow: 0 4px 6px rgba(52, 152, 219, 0.2);\n}\n\n.btn-primary:hover {\n  background-color: #be279e;\n}\n\n.btn-primary:active {\n  transform: translateY(1px);\n}\n\n/* Notification Styling */\n.notification {\n  position: fixed;\n  bottom: 30px;\n  right: 30px;\n  min-width: 300px;\n  padding: 15px;\n  background-color: white;\n  border-radius: 8px;\n  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  transform: translateY(20px);\n  opacity: 0;\n  transition: transform 0.3s, opacity 0.3s;\n  z-index: 1000;\n}\n\n.notification.show {\n  transform: translateY(0);\n  opacity: 1;\n}\n\n.notification.success {\n  border-left: 4px solid #2ecc71;\n}\n\n.notification.error {\n  border-left: 4px solid #e74c3c;\n}\n\n.notification-content {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.notification-content i {\n  font-size: 1.2rem;\n}\n\n.notification.success i {\n  color: #2ecc71;\n}\n\n.notification.error i {\n  color: #e74c3c;\n}\n\n.notification p {\n  margin: 0;\n  font-size: 0.9rem;\n}\n\n.close-notification {\n  background: none;\n  border: none;\n  cursor: pointer;\n  color: #7f8c8d;\n  padding: 0;\n}\n\n.hidden {\n  display: none !important;\n}\n\n/* Responsive Styling */\n@media (max-width: 768px) {\n  .add-story-card {\n    padding: 1.5rem;\n  }\n  \n  .photo-buttons {\n    flex-direction: column;\n  }\n  \n  .form-actions {\n    flex-direction: column;\n  }\n  \n  .btn-secondary, .btn-primary {\n    width: 100%;\n  }\n}\n  /* Story Detail */\n  .story-detail {\n    background-color: white;\n    padding: 2rem;\n    border-radius: 10px;\n    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n  }\n  \n  .story__title {\n    color: #5c0449;\n    margin-bottom: 1.5rem;\n  }\n  \n  .story__poster {\n    width: 100%;\n    max-height: 500px;\n    object-fit: contain;\n    border-radius: 10px;\n    margin-bottom: 1.5rem;\n  }\n  \n  .story__info {\n    margin-bottom: 1.5rem;\n  }\n  \n  .story__date {\n    color: #777;\n  }\n  \n  .story__overview {\n    line-height: 1.8;\n    margin-bottom: 1.5rem;\n  }\n  \n  /* Footer */\n  footer {\n    background-color: #5c0449;\n    color: white;\n    text-align: center;\n    padding: 1.5rem;\n    margin-top: 2rem;\n  }\n  \n  /* View Transition */\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n  \n  .view-transition-fade {\n    view-transition-name: fade;\n  }\n  \n  ::view-transition-old(fade) {\n    animation: 300ms cubic-bezier(0.4, 0, 0.2, 1) both fadeOut;\n  }\n  \n  ::view-transition-new(fade) {\n    animation: 300ms cubic-bezier(0.4, 0, 0.2, 1) both fadeIn;\n  }\n  \n  /* Loader */\n  .loader {\n    display: flex;\n    justify-content: center;\n    padding: 2rem;\n  }\n  \n  /* Error States */\n  .error {\n    background-color: #f8d7da;\n    color: #721c24;\n    padding: 1rem;\n    margin-bottom: 1rem;\n    border-radius: 5px;\n    text-align: center;\n  }\n  \n  .error-page {\n    text-align: center;\n    padding: 3rem;\n    font-size: 1.5rem;\n    color: #555;\n  }\n  \n  .empty-state {\n    text-align: center;\n    padding: 2rem;\n    color: #555;\n  }\n  \n  /* Map Popup Style */\n  .map-popup {\n    text-align: center;\n  }\n  \n  .map-popup img {\n    max-width: 100%;\n    height: auto;\n    border-radius: 10px;\n    margin-bottom: 0.5rem;\n  }\n\n  .map-popup h3 {\n    margin: 0.5rem 0;\n    font-size: 1.2rem;\n    color: #5c0449;\n  }\n\n  .map-popup p {\n    font-size: 0.95rem;\n    color: #555;\n  }\n\n  /* Responsive */\n  @media (max-width: 768px) {\n    .header-container,\n    main,\n    .add-story {\n      padding: 1rem;\n    }\n\n    .stories {\n      grid-template-columns: 1fr;\n    }\n\n    .camera-controls {\n      flex-direction: column;\n      gap: 0.5rem;\n    }\n  }\n\n  @media (max-width: 480px) {\n    header h1 {\n      font-size: 1.2rem;\n    }\n\n    nav ul {\n      flex-direction: column;\n      gap: 0.5rem;\n    }\n\n    nav li {\n      margin-left: 0;\n    }\n\n    .btn {\n      font-size: 0.9rem;\n      padding: 0.4rem 0.8rem;\n    }\n  }\n\n  #location-map {\n    height: 400px;\n    width: 100%;\n    border-radius: 10px;\n    margin-bottom: 1rem;\n    border: 2px solid #ddd;\n  }\n  \n  .story-image {\n    width: 100%;\n    height: 200px;\n    object-fit: cover;\n    border-radius: 12px;\n  }\n  \n  .location-controls {\n  margin-bottom: 10px;\n}\n\n.btn-location {\n  padding: 8px 16px;\n  background: #007bff;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n}\n\n.btn-location:hover {\n  background: #0056b3;\n}\n\n/* Login Page Styles */\n.login-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: calc(100vh - 180px);\n  padding: 2rem 1rem;\n  background-color: #f8f9fa;\n}\n\n.login-card {\n  width: 100%;\n  max-width: 450px;\n  background-color: white;\n  border-radius: 15px;\n  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);\n  overflow: hidden;\n  padding: 2.5rem;\n  transition: transform 0.3s, box-shadow 0.3s;\n}\n\n.login-card:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);\n}\n\n.login-header {\n  text-align: center;\n  margin-bottom: 2rem;\n}\n\n.login-header h2 {\n  color: #5c0449;\n  font-size: 1.8rem;\n  margin-bottom: 0.5rem;\n}\n\n.login-header p {\n  color: #7f8c8d;\n  font-size: 1rem;\n}\n\n.login-form .form-group {\n  margin-bottom: 1.5rem;\n}\n\n.login-form label {\n  display: block;\n  margin-bottom: 0.5rem;\n  font-weight: 600;\n  color: #5c0449;\n  font-size: 0.9rem;\n}\n\n.input-with-icon {\n  position: relative;\n}\n\n.input-with-icon i {\n  position: absolute;\n  left: 15px;\n  top: 50%;\n  transform: translateY(-50%);\n  color: #95a5a6;\n}\n\n.input-with-icon input {\n  width: 100%;\n  padding: 12px 15px 12px 45px;\n  border: 2px solid #e0e0e0;\n  border-radius: 8px;\n  font-size: 1rem;\n  transition: border-color 0.3s, box-shadow 0.3s;\n}\n\n.input-with-icon input:focus {\n  border-color: #be279e;\n  box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);\n  outline: none;\n}\n\n.toggle-password {\n  position: absolute;\n  right: 15px;\n  top: 50%;\n  transform: translateY(-50%);\n  background: none;\n  border: none;\n  color: #95a5a6;\n  cursor: pointer;\n  padding: 0;\n  font-size: 1rem;\n}\n\n.toggle-password:hover {\n  color: #be279e;\n}\n\n.form-options {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1.5rem;\n  font-size: 0.9rem;\n}\n\n.remember-me {\n  display: flex;\n  align-items: center;\n}\n\n.remember-me input[type=\"checkbox\"] {\n  margin-right: 8px;\n  accent-color: #be279e;\n}\n\n.forgot-password {\n  color: #be279e;\n  text-decoration: none;\n  transition: color 0.3s;\n}\n\n.forgot-password:hover {\n  color: #be279e;\n  text-decoration: underline;\n}\n\n.btn-login {\n  width: 100%;\n  padding: 12px;\n  background-color: #be279e;\n  border: none;\n  border-radius: 8px;\n  color: white;\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: background-color 0.3s;\n  margin-bottom: 1.5rem;\n  box-shadow: 0 4px 6px rgba(52, 152, 219, 0.2);\n}\n\n.btn-login:hover {\n  background-color: #be279e;\n}\n\n.btn-login:active {\n  transform: translateY(1px);\n}\n\n.btn-login.success {\n  background-color: #2ecc71;\n}\n\n.login-footer {\n  text-align: center;\n  color: #be279e;\n  font-size: 0.9rem;\n}\n\n.login-footer a {\n  color: #be279e;\n  text-decoration: none;\n  font-weight: 600;\n  transition: color 0.3s;\n}\n\n.login-footer a:hover {\n  color: #be279e;\n  text-decoration: underline;\n}\n\n.error-message {\n  padding: 12px;\n  margin-bottom: 15px;\n  background-color: #fdeeee;\n  border-left: 4px solid #e74c3c;\n  color: #c0392b;\n  border-radius: 4px;\n  font-size: 0.9rem;\n}\n\n/* Responsiveness */\n@media (max-width: 500px) {\n  .login-card {\n    padding: 1.5rem;\n  }\n  \n  .login-header h2 {\n    font-size: 1.5rem;\n  }\n  \n  .form-options {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 10px;\n  }\n}\n\n/* CSS untuk form login */\n.login-form-container {\n  max-width: 500px;\n  margin: 0 auto;\n  padding: 20px;\n  background-color: #f9f9f9;\n  border-radius: 8px;\n  box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n}\n\n.login-form .form-group {\n  margin-bottom: 15px;\n}\n\n.login-form label {\n  display: block;\n  margin-bottom: 5px;\n  font-weight: bold;\n}\n\n.login-form input {\n  width: 100%;\n  padding: 10px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  font-size: 16px;\n}\n\n.login-form .btn {\n  display: block;\n  width: 100%;\n  padding: 12px;\n  background-color: #be279e;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 16px;\n  font-weight: bold;\n  margin-top: 20px;\n}\n\n.login-form .btn:hover {\n  background-color: #5c0449;\n}\n\n.login-form .register-link {\n  text-align: center;\n  margin-top: 15px;\n}\n\n.login-form .register-link a {\n  color: #be279e;\n  text-decoration: none;\n  font-weight: bold;\n}\n\n.login-form .register-link a:hover {\n  text-decoration: underline;\n}\n\n/* CSS untuk error page */\n.error-page {\n  text-align: center;\n  padding: 40px 20px;\n  margin: 20px auto;\n  max-width: 600px;\n  background-color: #f8f8f8;\n  border-radius: 8px;\n  box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n}\n\n.error-page h2 {\n  color: #e74c3c;\n  margin-bottom: 15px;\n}\n\n.error-page p {\n  margin-bottom: 20px;\n  color: #555;\n}\n\n.error-page button {\n  padding: 10px 20px;\n  background-color: #5c0449;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 16px;\n}\n\n/* register */\n.register-container {\n  max-width: 400px;\n  margin: 40px auto;\n  padding: 20px;\n  border-radius: 8px;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n}\n\n.form-group {\n  margin-bottom: 15px;\n}\n\n.form-group label {\n  display: block;\n  margin-bottom: 5px;\n  font-weight: bold;\n}\n\n.form-group input {\n  width: 100%;\n  padding: 8px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n}\n\n.register-button {\n  width: 100%;\n  padding: 10px;\n  background-color: #be279e;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n}\n\n.register-button:hover {\n  background-color: #be279e;\n}",""]);const s=i},470:(n,e,t)=>{t(997);var r=t(72),o=t.n(r),a=t(825),i=t.n(a),s=t(659),c=t.n(s),l=t(56),u=t.n(l),d=t(540),f=t.n(d),p=t(113),h=t.n(p),m=t(306),g={};g.styleTagTransform=h(),g.setAttributes=u(),g.insert=c().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=f(),o()(m.A,g),m.A&&m.A.locals&&m.A.locals;var y=function(n){if(!n)return"Tanggal tidak diketahui";try{var e=new Date(n);return isNaN(e.getTime())?"Tanggal tidak valid":e.toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(n){return console.error("Error formatting date:",n),"Tanggal tidak diketahui"}},v=function(n){return console.log("🔍 Template: Creating story item for:",n),'\n    <div class="story-item">\n      <img class="story-item__header__poster" \n           src="'.concat(n.image||"https://placehold.co/400x300/333/ffffff/png?text=No+Image",'" \n           alt="').concat(n.title||"Untitled Story",'" \n           onerror="this.src=\'https://placehold.co/400x300/333/ffffff/png?text=No+Image\'; this.alt=\'No Image Available\';">\n      <div class="story-item__content">\n        <h3 class="story-item__title">\n          <a href="#/detail/').concat(n.id,'">').concat(n.title||"Untitled Story",'</a>\n        </h3>\n        <p class="story-item__description">').concat((n.description||"No description available").substring(0,100),'...</p>\n        <p class="story-item__date">\n          <i class="fas fa-calendar-alt"></i> ').concat(y(n.date),'\n          <br>\n          <i class="fas fa-map-marker-alt"></i> ').concat(n.location||"Lokasi tidak diketahui",'\n          <br>\n          <i class="fas fa-user"></i> ').concat(n.author||"Anonim",'\n        </p>\n        <div class="story-item__actions">\n          <a href="#/detail/').concat(n.id,'" class="btn-detail">Lihat Selengkapnya <i class="fas fa-arrow-right"></i></a>\n        </div>\n      </div>\n    </div>\n  ')},b=function(n){return console.log("🔍 Template: Creating story detail for:",n),'\n    <div class="story-detail">\n      <h2 class="story__title">'.concat(n.title||"Untitled Story",'</h2>\n      <img class="story__poster" \n           src="').concat(n.image||"https://placehold.co/600x400/333/ffffff/png?text=No+Image",'" \n           alt="').concat(n.title||"Untitled Story",'" \n           onerror="this.src=\'https://placehold.co/600x400/333/ffffff/png?text=No+Image\'; this.alt=\'No Image Available\';">\n      <div class="story__info">\n        <p class="story__date"><i class="fas fa-calendar-alt"></i> Tanggal: ').concat(y(n.date),'</p>\n        <p class="story__location"><i class="fas fa-map-marker-alt"></i> Lokasi: ').concat(n.location||"Tidak diketahui",'</p>\n        <p class="story__author"><i class="fas fa-user"></i> Penulis: ').concat(n.author||"Anonim",'</p>\n      </div>\n      <p class="story__overview">').concat(n.content||n.description||"No content available",'</p>\n    </div>\n    <div class="action-buttons mt-4 flex justify-center gap-4">\n      <button id="saveStoryBtn" class="btn-primary"><i class="fas fa-bookmark"></i> Simpan Story</button>\n      <button id="tryNotificationBtn" class="btn-primary"><i class="fas fa-bell"></i> Coba Notifikasi</button>\n      <button id="backToListBtn" class="btn-secondary"><i class="fas fa-arrow-left"></i> Kembali</button>\n    </div>\n  ')},w=function(n){return console.log("🔍 Template: Creating saved story item for:",n),'\n    <div class="story-item">\n      <img class="story-item__header__poster" \n           src="'.concat(n.image||"https://placehold.co/400x300/333/ffffff/png?text=No+Image",'" \n           alt="').concat(n.title||"Untitled Story",'" \n           onerror="this.src=\'https://placehold.co/400x300/333/ffffff/png?text=No+Image\'; this.alt=\'No Image Available\';">\n      <div class="story-item__content">\n        <h3 class="story-item__title">\n          <a href="#/detail/').concat(n.id,'">').concat(n.title||"Untitled Story",'</a>\n        </h3>\n        <p class="story-item__description">').concat((n.description||"No description available").substring(0,100),'...</p>\n        <p class="story-item__date">\n          <i class="fas fa-calendar-alt"></i> ').concat(y(n.date),'\n          <br>\n          <i class="fas fa-map-marker-alt"></i> ').concat(n.location||"Lokasi tidak diketahui",'\n          <br>\n          <i class="fas fa-user"></i> ').concat(n.author||"Anonim",'\n        </p>\n        <div class="story-item__actions">\n          <a href="#/detail/').concat(n.id,'" class="btn-detail">Lihat Detail <i class="fas fa-arrow-right"></i></a>\n          <button class="btn-delete" data-id="').concat(n.id,'"><i class="fas fa-trash"></i> Hapus</button>\n        </div>\n      </div>\n    </div>\n  ')};function k(){return localStorage.getItem("token")}function S(n){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},S(n)}function x(){var n,e,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,r,o,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return _(l,"_invoke",function(t,r,o){var a,s,c,l=0,u=o||[],d=!1,f={p:0,n:0,v:n,a:p,f:p.bind(n,4),d:function(e,t){return a=e,s=0,c=n,f.n=t,i}};function p(t,r){for(s=t,c=r,e=0;!d&&l&&!o&&e<u.length;e++){var o,a=u[e],p=f.p,h=a[2];t>3?(o=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=n):a[0]<=p&&((o=t<2&&p<a[1])?(s=0,f.v=r,f.n=a[1]):p<h&&(o=t<3||a[0]>r||r>h)&&(a[4]=t,a[5]=r,f.n=h,s=0))}if(o||t>1)return i;throw d=!0,r}return function(o,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),s=u,c=h;(e=s<2?n:c)||!d;){a||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(l=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=n}else if((e=(d=f.n<0)?c:t.call(r,f))!==i)break}catch(e){a=n,s=1,c=e}finally{l=1}}return{value:e,done:d}}}(t,o,a),!0),l}var i={};function s(){}function c(){}function l(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(_(e={},r,(function(){return this})),e),d=l.prototype=s.prototype=Object.create(u);function f(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,l):(n.__proto__=l,_(n,o,"GeneratorFunction")),n.prototype=Object.create(d),n}return c.prototype=l,_(d,"constructor",l),_(l,"constructor",c),c.displayName="GeneratorFunction",_(l,o,"GeneratorFunction"),_(d),_(d,o,"Generator"),_(d,r,(function(){return this})),_(d,"toString",(function(){return"[object Generator]"})),(x=function(){return{w:a,m:f}})()}function _(n,e,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(n){o=0}_=function(n,e,t,r){if(e)o?o(n,e,{value:t,enumerable:!r,configurable:!r,writable:!r}):n[e]=t;else{var a=function(e,t){_(n,e,(function(n){return this._invoke(e,t,n)}))};a("next",0),a("throw",1),a("return",2)}},_(n,e,t,r)}function E(n,e,t,r,o,a,i){try{var s=n[a](i),c=s.value}catch(n){return void t(n)}s.done?e(c):Promise.resolve(c).then(r,o)}function M(n){return function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(n){E(a,r,o,i,s,"next",n)}function s(n){E(a,r,o,i,s,"throw",n)}i(void 0)}))}}function P(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,j(r.key),r)}}function j(n){var e=function(n){if("object"!=S(n)||!n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var t=e.call(n,"string");if("object"!=S(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==S(e)?e:e+""}const T=function(){return n=function n(e){var t=e.view,r=e.storyRepository;!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this._view=t,this._storyRepository=r,this._stories=[]},e=[{key:"init",value:(r=M(x().m((function n(){return x().w((function(n){for(;;)switch(n.n){case 0:return n.n=1,this._showStories();case 1:return n.a(2)}}),n,this)}))),function(){return r.apply(this,arguments)})},{key:"_showStories",value:(t=M(x().m((function n(){var e,t;return x().w((function(n){for(;;)switch(n.n){case 0:if(n.p=0,this._view.showLoading(),k()){n.n=1;break}return this._view.showLoginError(),this._view.hideLoading(),n.a(2);case 1:return console.log("🔍 DEBUG: Fetching stories..."),n.n=2,this._storyRepository.getStories();case 2:this._stories=n.v,console.log("🔍 DEBUG: Raw stories from repository:",this._stories),console.log("🔍 DEBUG: Stories length:",this._stories.length),this._stories.length>0&&(console.log("🔍 DEBUG: First story structure:",this._stories[0]),console.log("🔍 DEBUG: First story keys:",Object.keys(this._stories[0]))),0===this._stories.length?this._view.showEmptyStories():(this._view.showStories(this._stories),e=this._stories.filter((function(n){return n.latitude&&n.longitude})),console.log("🔍 DEBUG: Stories with location:",e.length),e.length>0&&this._view.renderMap(e)),n.n=4;break;case 3:n.p=3,t=n.v,console.error("❌ HomePresenter Error:",t),this._view.showError(t);case 4:return n.p=4,this._view.hideLoading(),n.f(4);case 5:return n.a(2)}}),n,this,[[0,3,4,5]])}))),function(){return t.apply(this,arguments)})}],e&&P(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,e,t,r}();var O=t(602);function B(){var n,e,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,r,o,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return I(l,"_invoke",function(t,r,o){var a,s,c,l=0,u=o||[],d=!1,f={p:0,n:0,v:n,a:p,f:p.bind(n,4),d:function(e,t){return a=e,s=0,c=n,f.n=t,i}};function p(t,r){for(s=t,c=r,e=0;!d&&l&&!o&&e<u.length;e++){var o,a=u[e],p=f.p,h=a[2];t>3?(o=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=n):a[0]<=p&&((o=t<2&&p<a[1])?(s=0,f.v=r,f.n=a[1]):p<h&&(o=t<3||a[0]>r||r>h)&&(a[4]=t,a[5]=r,f.n=h,s=0))}if(o||t>1)return i;throw d=!0,r}return function(o,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),s=u,c=h;(e=s<2?n:c)||!d;){a||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(l=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=n}else if((e=(d=f.n<0)?c:t.call(r,f))!==i)break}catch(e){a=n,s=1,c=e}finally{l=1}}return{value:e,done:d}}}(t,o,a),!0),l}var i={};function s(){}function c(){}function l(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(I(e={},r,(function(){return this})),e),d=l.prototype=s.prototype=Object.create(u);function f(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,l):(n.__proto__=l,I(n,o,"GeneratorFunction")),n.prototype=Object.create(d),n}return c.prototype=l,I(d,"constructor",l),I(l,"constructor",c),c.displayName="GeneratorFunction",I(l,o,"GeneratorFunction"),I(d),I(d,o,"Generator"),I(d,r,(function(){return this})),I(d,"toString",(function(){return"[object Generator]"})),(B=function(){return{w:a,m:f}})()}function I(n,e,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(n){o=0}I=function(n,e,t,r){if(e)o?o(n,e,{value:t,enumerable:!r,configurable:!r,writable:!r}):n[e]=t;else{var a=function(e,t){I(n,e,(function(n){return this._invoke(e,t,n)}))};a("next",0),a("throw",1),a("return",2)}},I(n,e,t,r)}function A(n,e,t,r,o,a,i){try{var s=n[a](i),c=s.value}catch(n){return void t(n)}s.done?e(c):Promise.resolve(c).then(r,o)}function G(n){return function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(n){A(a,r,o,i,s,"next",n)}function s(n){A(a,r,o,i,s,"throw",n)}i(void 0)}))}}var D,R="stories",C="saved_stories",F="story-queue",H="auth";function U(){return{showMessageBox:"function"==typeof window.showMessageBox?window.showMessageBox:function(n,e){return console.log("[Message: ".concat(e,"] ").concat(n))},showModalMessageBox:"function"==typeof window.showModalMessageBox?window.showModalMessageBox:function(n,e){return console.log("[Modal: ".concat(n,"] ").concat(e))}}}function z(){return N.apply(this,arguments)}function N(){return(N=G(B().m((function n(){var e,t,r;return B().w((function(n){for(;;)switch(n.n){case 0:if(!D){n.n=1;break}return n.a(2,D);case 1:return e=U(),t=e.showModalMessageBox,n.p=2,n.n=3,(0,O.P2)("story-app-db",1,{upgrade:function(n,e,t,r){console.log("IndexedDB upgrade needed from version ".concat(e," to ").concat(t)),n.objectStoreNames.contains(R)||n.createObjectStore(R,{keyPath:"id"}),n.objectStoreNames.contains(C)||n.createObjectStore(C,{keyPath:"id"}),n.objectStoreNames.contains(F)||n.createObjectStore(F,{keyPath:"id"}),n.objectStoreNames.contains(H)||n.createObjectStore(H)},blocked:function(){t("IndexedDB Terblokir","IndexedDB terblokir. Pastikan tidak ada tab lain yang membuka aplikasi.")},blocking:function(){t("IndexedDB Diblokir","IndexedDB diblokir. Pastikan tidak ada tab lain yang membuka aplikasi.")}});case 3:return D=n.v,console.log("IndexedDB opened successfully."),n.a(2,D);case 4:throw n.p=4,r=n.v,console.error("Failed to open IndexedDB:",r),t("Error Database","Gagal membuka database lokal. Fitur offline mungkin terbatas."),r;case 5:return n.a(2)}}),n,null,[[2,4]])})))).apply(this,arguments)}function q(n,e){return W.apply(this,arguments)}function W(){return W=G(B().m((function n(e,t){var r,o,a,i;return B().w((function(n){for(;;)switch(n.n){case 0:if(D){n.n=1;break}return n.n=1,z();case 1:return r=U(),o=r.showMessageBox,a=r.showModalMessageBox,n.p=2,n.n=3,D.put(e,t);case 3:e===R?o("Cerita berhasil disimpan lokal!","success"):e===C?o("Cerita berhasil disimpan ke daftar tersimpan!","success"):e===F&&o("Cerita ditambahkan ke antrean sinkronisasi!","info"),n.n=5;break;case 4:throw n.p=4,i=n.v,console.error("Error putting story in ".concat(e,":"),i),a("Error Simpan Data","Gagal menyimpan cerita ke ".concat(e,".")),i;case 5:return n.a(2)}}),n,null,[[2,4]])}))),W.apply(this,arguments)}function K(n){return V.apply(this,arguments)}function V(){return(V=G(B().m((function n(e){var t,r,o;return B().w((function(n){for(;;)switch(n.n){case 0:if(D){n.n=1;break}return n.n=1,z();case 1:return t=U(),r=t.showModalMessageBox,n.p=2,n.n=3,D.getAll(e);case 3:return n.a(2,n.v);case 4:throw n.p=4,o=n.v,console.error("Error getting all stories from ".concat(e,":"),o),r("Error Ambil Data","Gagal mengambil cerita dari ".concat(e,".")),o;case 5:return n.a(2)}}),n,null,[[2,4]])})))).apply(this,arguments)}function Y(n,e){return J.apply(this,arguments)}function J(){return(J=G(B().m((function n(e,t){var r,o,a;return B().w((function(n){for(;;)switch(n.n){case 0:if(D){n.n=1;break}return n.n=1,z();case 1:return r=U(),o=r.showModalMessageBox,n.p=2,n.n=3,D.get(e,t);case 3:return n.a(2,n.v);case 4:throw n.p=4,a=n.v,console.error("Error getting story by ID from ".concat(e,":"),a),o("Error Ambil Detail","Gagal mengambil detail cerita dari ".concat(e,".")),a;case 5:return n.a(2)}}),n,null,[[2,4]])})))).apply(this,arguments)}function $(n,e){return Q.apply(this,arguments)}function Q(){return Q=G(B().m((function n(e,t){var r,o,a,i;return B().w((function(n){for(;;)switch(n.n){case 0:if(D){n.n=1;break}return n.n=1,z();case 1:return r=U(),o=r.showMessageBox,a=r.showModalMessageBox,n.p=2,n.n=3,D.delete(e,t);case 3:o("Cerita berhasil dihapus!","success"),n.n=5;break;case 4:throw n.p=4,i=n.v,console.error("Error deleting story from ".concat(e,":"),i),a("Error Hapus Data","Gagal menghapus cerita dari ".concat(e,".")),i;case 5:return n.a(2)}}),n,null,[[2,4]])}))),Q.apply(this,arguments)}function X(n){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},X(n)}function Z(n,e){var t="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return nn(n,e);var t={}.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?nn(n,e):void 0}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,o=function(){};return{s:o,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(n){throw n},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){t=t.call(n)},n:function(){var n=t.next();return i=n.done,n},e:function(n){s=!0,a=n},f:function(){try{i||null==t.return||t.return()}finally{if(s)throw a}}}}function nn(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function en(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function tn(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?en(Object(t),!0).forEach((function(e){rn(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):en(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function rn(n,e,t){return(e=un(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function on(){var n,e,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,r,o,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return an(l,"_invoke",function(t,r,o){var a,s,c,l=0,u=o||[],d=!1,f={p:0,n:0,v:n,a:p,f:p.bind(n,4),d:function(e,t){return a=e,s=0,c=n,f.n=t,i}};function p(t,r){for(s=t,c=r,e=0;!d&&l&&!o&&e<u.length;e++){var o,a=u[e],p=f.p,h=a[2];t>3?(o=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=n):a[0]<=p&&((o=t<2&&p<a[1])?(s=0,f.v=r,f.n=a[1]):p<h&&(o=t<3||a[0]>r||r>h)&&(a[4]=t,a[5]=r,f.n=h,s=0))}if(o||t>1)return i;throw d=!0,r}return function(o,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),s=u,c=h;(e=s<2?n:c)||!d;){a||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(l=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=n}else if((e=(d=f.n<0)?c:t.call(r,f))!==i)break}catch(e){a=n,s=1,c=e}finally{l=1}}return{value:e,done:d}}}(t,o,a),!0),l}var i={};function s(){}function c(){}function l(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(an(e={},r,(function(){return this})),e),d=l.prototype=s.prototype=Object.create(u);function f(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,l):(n.__proto__=l,an(n,o,"GeneratorFunction")),n.prototype=Object.create(d),n}return c.prototype=l,an(d,"constructor",l),an(l,"constructor",c),c.displayName="GeneratorFunction",an(l,o,"GeneratorFunction"),an(d),an(d,o,"Generator"),an(d,r,(function(){return this})),an(d,"toString",(function(){return"[object Generator]"})),(on=function(){return{w:a,m:f}})()}function an(n,e,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(n){o=0}an=function(n,e,t,r){if(e)o?o(n,e,{value:t,enumerable:!r,configurable:!r,writable:!r}):n[e]=t;else{var a=function(e,t){an(n,e,(function(n){return this._invoke(e,t,n)}))};a("next",0),a("throw",1),a("return",2)}},an(n,e,t,r)}function sn(n,e,t,r,o,a,i){try{var s=n[a](i),c=s.value}catch(n){return void t(n)}s.done?e(c):Promise.resolve(c).then(r,o)}function cn(n){return function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(n){sn(a,r,o,i,s,"next",n)}function s(n){sn(a,r,o,i,s,"throw",n)}i(void 0)}))}}function ln(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,un(r.key),r)}}function un(n){var e=function(n){if("object"!=X(n)||!n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var t=e.call(n,"string");if("object"!=X(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==X(e)?e:e+""}function dn(){return{showMessageBox:"function"==typeof window.showMessageBox?window.showMessageBox:function(n,e){return console.log("[".concat((null==e?void 0:e.toUpperCase())||"INFO","] ").concat(n))},showModalMessageBox:"function"==typeof window.showModalMessageBox?window.showModalMessageBox:function(n,e){return console.log("[Modal: ".concat(n,"] ").concat(e))}}}var fn=function(){return n=function n(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this._apiSource=e,this._locationCache=new Map},e=[{key:"_getLocationName",value:(h=cn(on().m((function n(e,t){var r,o,a,i,s,c,l;return on().w((function(n){for(;;)switch(n.n){case 0:if(r="".concat(e,",").concat(t),!this._locationCache.has(r)){n.n=1;break}return n.a(2,this._locationCache.get(r));case 1:return n.p=1,n.n=2,fetch("https://nominatim.openstreetmap.org/reverse?format=json&lat=".concat(e,"&lon=").concat(t,"&zoom=10&addressdetails=1"));case 2:if(!(o=n.v).ok){n.n=4;break}return n.n=3,o.json();case 3:return a=n.v,i="Unknown Location",a&&a.display_name&&((s=a.address)?(c=[],s.village&&c.push(s.village),s.town&&c.push(s.town),s.city&&c.push(s.city),s.county&&c.push(s.county),s.state&&c.push(s.state),i=c.length>0?c.slice(0,2).join(", "):a.display_name.split(",")[0]):i=a.display_name.split(",")[0]),this._locationCache.set(r,i),n.a(2,i);case 4:n.n=6;break;case 5:n.p=5,l=n.v,console.warn("Error getting location name:",l);case 6:return n.a(2,"".concat(e.toFixed(4),", ").concat(t.toFixed(4)))}}),n,this,[[1,5]])}))),function(n,e){return h.apply(this,arguments)})},{key:"_transformStoryData",value:(p=cn(on().m((function n(e){var t,r,o;return on().w((function(n){for(;;)switch(n.n){case 0:if(e){n.n=1;break}return n.a(2,null);case 1:if(console.log("🔧 Transforming story data:",e),t="Unknown Location",!e.lat||!e.lon){n.n=5;break}return n.p=2,n.n=3,this._getLocationName(e.lat,e.lon);case 3:t=n.v,n.n=5;break;case 4:n.p=4,o=n.v,console.warn("Failed to resolve location:",o),t="".concat(e.lat.toFixed(4),", ").concat(e.lon.toFixed(4));case 5:return r=tn({id:e.id,title:e.name||e.title||"Untitled Story",description:e.description||"No description available",content:e.description||"No content available",image:e.photoUrl||e.image||null,author:e.author||"Unknown Author",date:e.createdAt||e.date||(new Date).toISOString(),location:t,latitude:e.lat||e.latitude||null,longitude:e.lon||e.longitude||null},e),console.log("✅ Transformed story:",r),n.a(2,r)}}),n,this,[[2,4]])}))),function(n){return p.apply(this,arguments)})},{key:"_transformStoriesArray",value:(f=cn(on().m((function n(e){var t,r,o=this;return on().w((function(n){for(;;)switch(n.n){case 0:if(Array.isArray(e)){n.n=1;break}return n.a(2,[]);case 1:return t=e.map((function(n){return o._transformStoryData(n)})),n.n=2,Promise.all(t);case 2:return r=n.v,n.a(2,r.filter((function(n){return null!==n})))}}),n)}))),function(n){return f.apply(this,arguments)})},{key:"getSavedStories",value:(d=cn(on().m((function n(){var e,t,r;return on().w((function(n){for(;;)switch(n.n){case 0:dn().showMessageBox,n.p=1,console.log("📖 StoryRepository: Getting saved stories..."),n.n=2;break;case 2:return n.n=3,K(C);case 3:return e=n.v,console.log("📖 Raw saved stories from DB:",e),n.n=4,this._transformStoriesArray(e);case 4:return t=n.v,console.log("📖 Transformed saved stories:",t),n.a(2,t);case 5:return n.p=5,r=n.v,console.error("❌ Error fetching saved stories:",r),n.a(2,this._getSavedStoriesFromLocalStorage())}}),n,this,[[1,5]])}))),function(){return d.apply(this,arguments)})},{key:"saveStory",value:(u=cn(on().m((function n(e){var t,r,o,a;return on().w((function(n){for(;;)switch(n.n){case 0:if(t=dn(),r=t.showMessageBox,n.p=1,console.log("💾 StoryRepository: Saving story:",e),e&&e.id){n.n=2;break}throw new Error("Data cerita tidak valid untuk disimpan");case 2:return n.n=3,this._transformStoryData(e);case 3:return o=n.v,console.log("💾 Transformed story for saving:",o),n.n=4,this.getSavedStories();case 4:if(!n.v.some((function(n){return n.id===e.id}))){n.n=5;break}return r("Cerita sudah tersimpan sebelumnya!","info"),n.a(2);case 5:n.n=6;break;case 6:return n.n=7,q(C,o);case 7:console.log("✅ Story saved to database successfully"),r("Cerita berhasil disimpan!","success"),n.n=9;break;case 8:throw n.p=8,a=n.v,console.error("❌ Error saving story:",a),a;case 9:return n.a(2)}}),n,this,[[1,8]])}))),function(n){return u.apply(this,arguments)})},{key:"deleteSavedStory",value:(l=cn(on().m((function n(e){var t,r,o;return on().w((function(n){for(;;)switch(n.n){case 0:if(t=dn(),r=t.showMessageBox,n.p=1,console.log("🗑️ StoryRepository: Deleting saved story:",e),e){n.n=2;break}throw new Error("ID cerita tidak valid untuk dihapus");case 2:n.n=3;break;case 3:return n.n=4,$(C,e);case 4:console.log("✅ Story deleted from database successfully"),r("Cerita berhasil dihapus dari daftar tersimpan!","success"),n.n=6;break;case 5:throw n.p=5,o=n.v,console.error("❌ Error deleting saved story:",o),o;case 6:return n.a(2)}}),n,this,[[1,5]])}))),function(n){return l.apply(this,arguments)})},{key:"_getSavedStoriesFromLocalStorage",value:function(){try{var n=localStorage.getItem("savedStories");return n?JSON.parse(n):[]}catch(n){return console.error("Error reading from localStorage:",n),[]}}},{key:"_saveStoryToLocalStorage",value:function(n){try{var e=this._getSavedStoriesFromLocalStorage();e.some((function(e){return e.id===n.id}))||(e.push(n),localStorage.setItem("savedStories",JSON.stringify(e)))}catch(n){throw console.error("Error saving to localStorage:",n),n}}},{key:"_deleteSavedStoryFromLocalStorage",value:function(n){try{var e=this._getSavedStoriesFromLocalStorage().filter((function(e){return e.id!==n}));localStorage.setItem("savedStories",JSON.stringify(e))}catch(n){throw console.error("Error deleting from localStorage:",n),n}}},{key:"login",value:(c=cn(on().m((function n(e){var t,r;return on().w((function(n){for(;;)switch(n.n){case 0:if(dn().showModalMessageBox,n.p=1,console.log("StoryRepository: Melakukan login..."),this._apiSource&&"function"==typeof this._apiSource.login){n.n=2;break}throw new Error("API Source tidak tersedia atau tidak memiliki method login");case 2:return n.n=3,this._apiSource.login(e);case 3:if((t=n.v)&&t.loginResult&&t.loginResult.token){n.n=4;break}throw new Error("Response login tidak valid dari server");case 4:return console.log("StoryRepository: Login berhasil"),n.a(2,t);case 5:throw n.p=5,r=n.v,console.error("StoryRepository: Error during login:",r),r;case 6:return n.a(2)}}),n,this,[[1,5]])}))),function(n){return c.apply(this,arguments)})},{key:"register",value:(s=cn(on().m((function n(e){var t,r;return on().w((function(n){for(;;)switch(n.n){case 0:if(dn().showModalMessageBox,n.p=1,console.log("StoryRepository: Melakukan registrasi..."),this._apiSource&&"function"==typeof this._apiSource.register){n.n=2;break}throw new Error("API Source tidak tersedia atau tidak memiliki method register");case 2:return n.n=3,this._apiSource.register(e);case 3:return t=n.v,console.log("StoryRepository: Registrasi berhasil"),n.a(2,t);case 4:throw n.p=4,r=n.v,console.error("StoryRepository: Error during registration:",r),r;case 5:return n.a(2)}}),n,this,[[1,4]])}))),function(n){return s.apply(this,arguments)})},{key:"getStories",value:(i=cn(on().m((function n(){var e,t,r,o,a,i,s,c,l,u,d,f,p,h,m;return on().w((function(n){for(;;)switch(n.n){case 0:return e=dn(),t=e.showMessageBox,r=e.showModalMessageBox,n.p=1,console.log("🔍 StoryRepository: Fetching stories..."),o=[],n.n=2,K(R);case 2:o=n.v;case 3:if(navigator.onLine||!(o.length>0)){n.n=5;break}return t("Memuat cerita dari cache (Anda offline)","info"),n.n=4,this._transformStoriesArray(o);case 4:return a=n.v,console.log("🔍 StoryRepository: Returning cached stories (offline):",a),n.a(2,a);case 5:return n.n=6,this._apiSource.getAllStories();case 6:if(i=n.v,console.log("🔍 StoryRepository: Raw API stories:",i),!(i&&i.length>0)){n.n=15;break}return n.n=7,this._transformStoriesArray(i);case 7:s=n.v,console.log("🔍 StoryRepository: Transformed stories:",s),c=Z(s),n.p=8,c.s();case 9:if((l=c.n()).done){n.n=11;break}return u=l.value,n.n=10,q(R,u);case 10:n.n=9;break;case 11:n.n=13;break;case 12:n.p=12,h=n.v,c.e(h);case 13:return n.p=13,c.f(),n.f(13);case 14:return t("Memuat cerita dari server","success"),n.a(2,s);case 15:if(!(o.length>0)){n.n=17;break}return n.n=16,this._transformStoriesArray(o);case 16:return d=n.v,t("Memuat cerita dari cache (API tidak merespons atau kosong)","info"),console.log("🔍 StoryRepository: Returning cached stories (API empty):",d),n.a(2,d);case 17:return t("Tidak ada cerita ditemukan.","info"),n.a(2,[]);case 18:n.n=24;break;case 19:return n.p=19,m=n.v,console.error("❌ StoryRepository: Error fetching stories:",m),f=[],n.n=20,K(R);case 20:f=n.v;case 21:if(!(f.length>0)){n.n=23;break}return n.n=22,this._transformStoriesArray(f);case 22:return p=n.v,t("Gagal memuat dari server, memuat dari cache.","error"),console.log("🔍 StoryRepository: Returning fallback cached stories:",p),n.a(2,p);case 23:return r("Error","Gagal memuat cerita: ".concat(m.message)),n.a(2,[]);case 24:return n.a(2)}}),n,this,[[8,12,13,14],[1,19]])}))),function(){return i.apply(this,arguments)})},{key:"getAllStories",value:function(){var n=cn(on().m((function n(){return on().w((function(n){for(;;)switch(n.n){case 0:return n.n=1,this.getStories();case 1:return n.a(2,n.v)}}),n,this)})));return function(){return n.apply(this,arguments)}}()},{key:"getStoryDetail",value:(a=cn(on().m((function n(e){var t,r,o,a,i,s,c,l,u,d;return on().w((function(n){for(;;)switch(n.n){case 0:return t=dn(),r=t.showMessageBox,o=t.showModalMessageBox,n.p=1,console.log("🔍 StoryRepository: Mengambil detail cerita ID: ".concat(e)),a=null,n.n=2,Y(R,e);case 2:a=n.v;case 3:if(navigator.onLine||!a){n.n=5;break}return r("Memuat detail cerita dari cache (Anda offline)","info"),n.n=4,this._transformStoryData(a);case 4:return i=n.v,console.log("🔍 StoryRepository: Returning cached story detail (offline):",i),n.a(2,i);case 5:if(!this._apiSource||"function"!=typeof this._apiSource.getStoryDetail){n.n=12;break}return n.p=6,n.n=7,this._apiSource.getStoryDetail(e);case 7:if(s=n.v,console.log("🔍 StoryRepository: Raw API story detail:",s),!s){n.n=10;break}return n.n=8,this._transformStoryData(s);case 8:return c=n.v,console.log("🔍 StoryRepository: Transformed story detail:",c),n.n=9,q(R,c);case 9:return n.a(2,c);case 10:n.n=12;break;case 11:n.p=11,u=n.v,console.warn("⚠️ API error, falling back to cache:",u);case 12:if(!a){n.n=14;break}return r("Memuat detail cerita dari cache (API tidak merespons)","info"),n.n=13,this._transformStoryData(a);case 13:return l=n.v,console.log("🔍 StoryRepository: Returning cached story detail (API failed):",l),n.a(2,l);case 14:throw new Error("Cerita tidak ditemukan");case 15:throw n.p=15,d=n.v,console.error("❌ StoryRepository: Error fetching story detail:",d),o("Error","Gagal memuat detail cerita: ".concat(d.message)),d;case 16:return n.a(2)}}),n,this,[[6,11],[1,15]])}))),function(n){return a.apply(this,arguments)})},{key:"addStory",value:(o=cn(on().m((function n(e){var t,r,o,a,i,s;return on().w((function(n){for(;;)switch(n.n){case 0:if(t=dn(),r=t.showMessageBox,o=t.showModalMessageBox,n.p=1,console.log("StoryRepository: Menambahkan cerita baru..."),this._apiSource&&"function"==typeof this._apiSource.addStory){n.n=2;break}throw new Error("API Source tidak tersedia atau tidak memiliki method addStory");case 2:if(navigator.onLine){n.n=3;break}throw r("Anda offline. Cerita akan diupload saat online kembali.","info"),new Error("Tidak dapat menambahkan cerita saat offline");case 3:return n.n=4,this._apiSource.addStory(e);case 4:if(a=n.v,r("Cerita berhasil ditambahkan!","success"),!a||!a.id){n.n=6;break}return n.n=5,this._transformStoryData(a);case 5:return i=n.v,n.n=6,q(R,i);case 6:return n.a(2,a);case 7:throw n.p=7,s=n.v,console.error("StoryRepository: Error adding story:",s),o("Error","Gagal menambahkan cerita: ".concat(s.message)),s;case 8:return n.a(2)}}),n,this,[[1,7]])}))),function(n){return o.apply(this,arguments)})},{key:"getStoriesWithLocation",value:(r=cn(on().m((function n(){var e,t,r,o,a;return on().w((function(n){for(;;)switch(n.n){case 0:if((e=dn()).showMessageBox,t=e.showModalMessageBox,n.p=1,this._apiSource&&"function"==typeof this._apiSource.getStoriesWithLocation){n.n=3;break}return n.n=2,this.getStories();case 2:return n.a(2,n.v);case 3:return n.n=4,this._apiSource.getStoriesWithLocation();case 4:return r=n.v,n.n=5,this._transformStoriesArray(r||[]);case 5:return o=n.v,console.log("🔍 StoryRepository: Stories with location:",o),n.a(2,o);case 6:return n.p=6,a=n.v,console.error("Error fetching stories with location:",a),t("Error","Gagal memuat cerita dengan lokasi: ".concat(a.message)),n.a(2,[])}}),n,this,[[1,6]])}))),function(){return r.apply(this,arguments)})},{key:"syncPendingStories",value:(t=cn(on().m((function n(){return on().w((function(n){for(;;)switch(n.n){case 0:console.log("Syncing pending stories...");case 1:return n.a(2)}}),n)}))),function(){return t.apply(this,arguments)})},{key:"getStoryById",value:function(){var n=cn(on().m((function n(e){return on().w((function(n){for(;;)switch(n.n){case 0:return console.log("🔧 StoryRepository: getStoryById dipanggil, delegating ke getStoryDetail"),n.n=1,this.getStoryDetail(e);case 1:return n.a(2,n.v)}}),n,this)})));return function(e){return n.apply(this,arguments)}}()}],e&&ln(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,e,t,r,o,a,i,s,c,l,u,d,f,p,h}();const pn=fn;function hn(n){return hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},hn(n)}function mn(){var n,e,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,r,o,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return gn(l,"_invoke",function(t,r,o){var a,s,c,l=0,u=o||[],d=!1,f={p:0,n:0,v:n,a:p,f:p.bind(n,4),d:function(e,t){return a=e,s=0,c=n,f.n=t,i}};function p(t,r){for(s=t,c=r,e=0;!d&&l&&!o&&e<u.length;e++){var o,a=u[e],p=f.p,h=a[2];t>3?(o=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=n):a[0]<=p&&((o=t<2&&p<a[1])?(s=0,f.v=r,f.n=a[1]):p<h&&(o=t<3||a[0]>r||r>h)&&(a[4]=t,a[5]=r,f.n=h,s=0))}if(o||t>1)return i;throw d=!0,r}return function(o,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),s=u,c=h;(e=s<2?n:c)||!d;){a||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(l=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=n}else if((e=(d=f.n<0)?c:t.call(r,f))!==i)break}catch(e){a=n,s=1,c=e}finally{l=1}}return{value:e,done:d}}}(t,o,a),!0),l}var i={};function s(){}function c(){}function l(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(gn(e={},r,(function(){return this})),e),d=l.prototype=s.prototype=Object.create(u);function f(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,l):(n.__proto__=l,gn(n,o,"GeneratorFunction")),n.prototype=Object.create(d),n}return c.prototype=l,gn(d,"constructor",l),gn(l,"constructor",c),c.displayName="GeneratorFunction",gn(l,o,"GeneratorFunction"),gn(d),gn(d,o,"Generator"),gn(d,r,(function(){return this})),gn(d,"toString",(function(){return"[object Generator]"})),(mn=function(){return{w:a,m:f}})()}function gn(n,e,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(n){o=0}gn=function(n,e,t,r){if(e)o?o(n,e,{value:t,enumerable:!r,configurable:!r,writable:!r}):n[e]=t;else{var a=function(e,t){gn(n,e,(function(n){return this._invoke(e,t,n)}))};a("next",0),a("throw",1),a("return",2)}},gn(n,e,t,r)}function yn(n,e,t,r,o,a,i){try{var s=n[a](i),c=s.value}catch(n){return void t(n)}s.done?e(c):Promise.resolve(c).then(r,o)}function vn(n){return function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(n){yn(a,r,o,i,s,"next",n)}function s(n){yn(a,r,o,i,s,"throw",n)}i(void 0)}))}}function bn(){return{showModalMessageBox:"function"==typeof window.showModalMessageBox?window.showModalMessageBox:function(n,e){return console.log("[Modal: ".concat(n,"] ").concat(e))}}}const wn={_BASE_URL:"https://story-api.dicoding.dev/v1",login:function(n){var e=this;return vn(mn().m((function t(){var r,o,a,i;return mn().w((function(t){for(;;)switch(t.n){case 0:return bn().showModalMessageBox,t.p=1,console.log("StoryApiSource: Melakukan login ke:","".concat(e._BASE_URL,"/login")),t.n=2,fetch("".concat(e._BASE_URL,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n.email,password:n.password})});case 2:if((r=t.v).ok){t.n=4;break}return t.n=3,r.json();case 3:throw o=t.v,console.error("StoryApiSource: Login gagal:",r.status,o),new Error(o.message||"Login gagal");case 4:return t.n=5,r.json();case 5:return a=t.v,console.log("StoryApiSource: Login berhasil"),t.a(2,a);case 6:throw t.p=6,i=t.v,console.error("Error during login:",i),i;case 7:return t.a(2)}}),t,null,[[1,6]])})))()},register:function(n){var e=this;return vn(mn().m((function t(){var r,o,a,i;return mn().w((function(t){for(;;)switch(t.n){case 0:return bn().showModalMessageBox,t.p=1,console.log("StoryApiSource: Melakukan registrasi ke:","".concat(e._BASE_URL,"/register")),t.n=2,fetch("".concat(e._BASE_URL,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n.name,email:n.email,password:n.password})});case 2:if((r=t.v).ok){t.n=4;break}return t.n=3,r.json();case 3:throw o=t.v,console.error("StoryApiSource: Registrasi gagal:",r.status,o),new Error(o.message||"Registrasi gagal");case 4:return t.n=5,r.json();case 5:return a=t.v,console.log("StoryApiSource: Registrasi berhasil"),t.a(2,a);case 6:throw t.p=6,i=t.v,console.error("Error during registration:",i),i;case 7:return t.a(2)}}),t,null,[[1,6]])})))()},getAllStories:function(){var n=this;return vn(mn().m((function e(){var t,r,o,a,i,s,c,l,u;return mn().w((function(e){for(;;)switch(e.n){case 0:return t=bn(),r=t.showModalMessageBox,e.p=1,o=k(),a=o?{Authorization:"Bearer ".concat(o)}:{},console.log("StoryApiSource: Mengambil semua cerita dari:","".concat(n._BASE_URL,"/stories")),e.n=2,fetch("".concat(n._BASE_URL,"/stories"),{headers:a});case 2:if((i=e.v).ok){e.n=5;break}return e.n=3,i.json();case 3:if(s=e.v,console.error("StoryApiSource: Gagal memuat semua cerita:",i.status,s),401!==i.status){e.n=4;break}return r("Session Expired","Sesi Anda telah berakhir. Silakan login kembali."),localStorage.removeItem("token"),window.location.hash="#/login",e.a(2);case 4:throw r("Error API","Gagal memuat cerita: ".concat(s.message||i.statusText)),new Error("API error: ".concat(s.message||i.statusText));case 5:return e.n=6,i.json();case 6:return c=e.v,l=c.listStory,e.a(2,l);case 7:throw e.p=7,u=e.v,console.error("Error fetching all stories:",u),u;case 8:return e.a(2)}}),e,null,[[1,7]])})))()},getStoryDetail:function(n){var e=this;return vn(mn().m((function t(){var r,o,a,i,s,c,l,u,d,f;return mn().w((function(t){for(;;)switch(t.n){case 0:if(r=bn(),o=r.showModalMessageBox,t.p=1,console.log("🐛 StoryApiSource getStoryDetail:",{id:n,idType:hn(n),idLength:null==n?void 0:n.length,finalUrl:"".concat(e._BASE_URL,"/stories/").concat(n)}),n&&"undefined"!==n&&"null"!==n&&""!==n.trim()){t.n=2;break}throw new Error("ID cerita tidak valid untuk API call");case 2:return a=k(),i=a?{Authorization:"Bearer ".concat(a)}:{},s="".concat(e._BASE_URL,"/stories/").concat(n),console.log("StoryApiSource: Mengambil detail cerita dari URL:",s),t.n=3,fetch(s,{headers:i});case 3:if(c=t.v,console.log("🐛 API Response:",{status:c.status,statusText:c.statusText,ok:c.ok,url:c.url}),c.ok){t.n=7;break}return t.n=4,c.json();case 4:if(l=t.v,console.error("StoryApiSource: Gagal memuat detail cerita:",c.status,l),404!==c.status){t.n=5;break}throw new Error('Cerita dengan ID "'.concat(n,'" tidak ditemukan di server'));case 5:if(401!==c.status){t.n=6;break}return o("Session Expired","Sesi Anda telah berakhir. Silakan login kembali."),localStorage.removeItem("token"),window.location.hash="#/login",t.a(2);case 6:throw new Error("API error: ".concat(l.message||c.statusText));case 7:return t.n=8,c.json();case 8:if(u=t.v,console.log("🐛 API Response Data:",u),d=u.story){t.n=9;break}throw new Error("Data cerita tidak valid dari server");case 9:return t.a(2,d);case 10:throw t.p=10,f=t.v,console.error("Error fetching story detail:",f),f;case 11:return t.a(2)}}),t,null,[[1,10]])})))()},addStory:function(n){var e=this;return vn(mn().m((function t(){var r,o,a,i,s,c,l,u;return mn().w((function(t){for(;;)switch(t.n){case 0:if(r=bn(),o=r.showModalMessageBox,t.p=1,i=k()){t.n=2;break}throw new Error("Anda harus login untuk menambahkan cerita.");case 2:return console.log("StoryApiSource: Mengirim cerita baru ke:","".concat(e._BASE_URL,"/stories")),t.n=3,fetch("".concat(e._BASE_URL,"/stories"),{method:"POST",headers:{Authorization:"Bearer ".concat(i)},body:n});case 3:if((s=t.v).ok){t.n=6;break}return t.n=4,s.json();case 4:if(c=t.v,console.error("StoryApiSource: Gagal menambahkan cerita:",s.status,c),401!==s.status){t.n=5;break}return o("Session Expired","Sesi Anda telah berakhir. Silakan login kembali."),localStorage.removeItem("token"),window.location.hash="#/login",t.a(2);case 5:throw o("Error Upload","Gagal mengunggah cerita: ".concat(c.message||s.statusText)),new Error("API error: ".concat(c.message||s.statusText));case 6:return t.n=7,s.json();case 7:return l=t.v,console.log("StoryApiSource:",l.message),t.a(2,(null===(a=l.data)||void 0===a?void 0:a.story)||l);case 8:throw t.p=8,u=t.v,console.error("Error adding story:",u),o("Error Upload",u.message||"Terjadi kesalahan saat menambahkan cerita."),u;case 9:return t.a(2)}}),t,null,[[1,8]])})))()},getStoriesWithLocation:function(){var n=this;return vn(mn().m((function e(){var t,r,o,a,i,s,c,l,u;return mn().w((function(e){for(;;)switch(e.n){case 0:return t=bn(),r=t.showModalMessageBox,e.p=1,o=k(),a=o?{Authorization:"Bearer ".concat(o)}:{},console.log("StoryApiSource: Mengambil cerita dengan lokasi dari:","".concat(n._BASE_URL,"/stories?location=1")),e.n=2,fetch("".concat(n._BASE_URL,"/stories?location=1"),{headers:a});case 2:if((i=e.v).ok){e.n=5;break}return e.n=3,i.json();case 3:if(s=e.v,console.error("StoryApiSource: Gagal memuat cerita dengan lokasi:",i.status,s),401!==i.status){e.n=4;break}return r("Session Expired","Sesi Anda telah berakhir. Silakan login kembali."),localStorage.removeItem("token"),window.location.hash="#/login",e.a(2);case 4:throw r("Error API","Gagal memuat cerita: ".concat(s.message||i.statusText)),new Error("API error: ".concat(s.message||i.statusText));case 5:return e.n=6,i.json();case 6:return c=e.v,l=c.listStory,e.a(2,l);case 7:throw e.p=7,u=e.v,console.error("Error fetching stories with location:",u),u;case 8:return e.a(2)}}),e,null,[[1,7]])})))()}};var kn=t(481),Sn=t.n(kn);function xn(){return{showModalMessageBox:"function"==typeof window.showModalMessageBox?window.showModalMessageBox:function(n,e){return console.log("[Modal: ".concat(n,"] ").concat(e))}}}var _n=new Map,En={initMap:function(n){var e,t,r=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=xn().showModalMessageBox;if("string"==typeof n)t=n,e=document.getElementById(t);else{if(!(n instanceof HTMLElement))return console.error("Map container harus berupa ID string atau elemen DOM."),null;e=n,(t=n.id)||(t="leaflet-map-".concat(Date.now()),e.id=t)}if(!e)return console.error('Elemen map dengan ID "'.concat(t,'" tidak ditemukan di DOM.')),null;if(void 0===Sn())return console.error("Leaflet tidak tersedia. Ini seharusnya tidak terjadi setelah import."),i("Error Peta","Library peta tidak ditemukan. Ada masalah internal."),null;if(e._leaflet_id){console.log("MapHelper: Menghapus peta lama dari elemen ".concat(t," (ditemukan _leaflet_id)."));var s=_n.get(t);if(s&&s instanceof Sn().Map)s.remove(),_n.delete(t);else try{Sn().map(t).remove(),console.warn("MapHelper: Berhasil menghapus peta lama secara paksa untuk ".concat(t,"."))}catch(n){return console.error("MapHelper: Gagal menghapus peta lama secara paksa untuk ".concat(t,":"),n.message),i("Error Peta","Gagal membersihkan peta lama di ".concat(t,": ").concat(n.message,".")),null}}try{var c=o.lat||-2.5489,l=o.lng||118.0149,u=o.zoom||5,d=Sn().map(t).setView([c,l],u);return Sn().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(d),delete Sn().Icon.Default.prototype._getIconUrl,Sn().Icon.Default.mergeOptions({iconRetinaUrl:"images/marker-icon-2x.png",iconUrl:"images/marker-icon.png",shadowUrl:"images/marker-shadow.png"}),a&&a.length>0&&a.forEach((function(n){if(n.latitude&&n.longitude){var e='\n              <div class="map-popup">\n                <h3>'.concat(n.title,'</h3>\n                <img src="').concat(n.image||"./images/placehold.co_100x75_333_ffffff_text_No_Image.png",'" alt="').concat(n.title,'" style="max-width: 100px; height: auto; border-radius: 5px;">\n                <p>').concat(n.description.substring(0,50)).concat(n.description.length>50?"...":"",'</p>\n                <a href="#/detail/').concat(n.id,'" class="popup-link" style="display: block; margin-top: 5px; color: #be279e; text-decoration: none;">Lihat Detail</a>\n              </div>\n            ');r.addMarker(d,n.latitude,n.longitude,n.title,e)}})),_n.set(t,d),d}catch(n){return console.error("MapHelper: Error initializing map:",n),i("Error Peta","Gagal menginisialisasi peta: ".concat(n.message)),null}},addMarker:function(n,e,t,r,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(!n||void 0===Sn())return console.error("Peta tidak valid atau Leaflet tidak tersedia untuk menambahkan marker."),null;if(void 0===e||void 0===t||null===e||null===t)return console.warn("Melewatkan marker untuk ".concat(r," karena koordinat tidak valid: lat=").concat(e,", lon=").concat(t)),null;try{return(a?Sn().marker([e,t],{icon:a}):Sn().marker([e,t])).addTo(n).bindPopup(o)}catch(n){return console.error("Error adding marker for ".concat(r,":"),n),xn().showModalMessageBox("Error Marker Peta","Gagal menambahkan marker untuk ".concat(r,": ").concat(n.message)),null}},getMapInstance:function(n){var e="string"==typeof n?n:n.id;return _n.get(e)}};const Mn=En;function Pn(){var n,e,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,r,o,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return jn(l,"_invoke",function(t,r,o){var a,s,c,l=0,u=o||[],d=!1,f={p:0,n:0,v:n,a:p,f:p.bind(n,4),d:function(e,t){return a=e,s=0,c=n,f.n=t,i}};function p(t,r){for(s=t,c=r,e=0;!d&&l&&!o&&e<u.length;e++){var o,a=u[e],p=f.p,h=a[2];t>3?(o=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=n):a[0]<=p&&((o=t<2&&p<a[1])?(s=0,f.v=r,f.n=a[1]):p<h&&(o=t<3||a[0]>r||r>h)&&(a[4]=t,a[5]=r,f.n=h,s=0))}if(o||t>1)return i;throw d=!0,r}return function(o,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),s=u,c=h;(e=s<2?n:c)||!d;){a||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(l=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=n}else if((e=(d=f.n<0)?c:t.call(r,f))!==i)break}catch(e){a=n,s=1,c=e}finally{l=1}}return{value:e,done:d}}}(t,o,a),!0),l}var i={};function s(){}function c(){}function l(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(jn(e={},r,(function(){return this})),e),d=l.prototype=s.prototype=Object.create(u);function f(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,l):(n.__proto__=l,jn(n,o,"GeneratorFunction")),n.prototype=Object.create(d),n}return c.prototype=l,jn(d,"constructor",l),jn(l,"constructor",c),c.displayName="GeneratorFunction",jn(l,o,"GeneratorFunction"),jn(d),jn(d,o,"Generator"),jn(d,r,(function(){return this})),jn(d,"toString",(function(){return"[object Generator]"})),(Pn=function(){return{w:a,m:f}})()}function jn(n,e,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(n){o=0}jn=function(n,e,t,r){if(e)o?o(n,e,{value:t,enumerable:!r,configurable:!r,writable:!r}):n[e]=t;else{var a=function(e,t){jn(n,e,(function(n){return this._invoke(e,t,n)}))};a("next",0),a("throw",1),a("return",2)}},jn(n,e,t,r)}function Tn(n,e,t,r,o,a,i){try{var s=n[a](i),c=s.value}catch(n){return void t(n)}s.done?e(c):Promise.resolve(c).then(r,o)}function On(n){return function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(n){Tn(a,r,o,i,s,"next",n)}function s(n){Tn(a,r,o,i,s,"throw",n)}i(void 0)}))}}const Ln={render:function(){return On(Pn().m((function n(){return Pn().w((function(n){for(;;)if(0===n.n)return n.a(2,'\n      <section class="content">\n        <h2 class="content__heading">List Story</h2>\n        <div class="loading" id="loading" style="display: none;">Memuat cerita...</div>\n        <div class="error-container" id="error-container" style="display: none;"></div>\n        <div id="stories" class="stories"></div>\n        <div id="map" class="map" style="height: 400px; margin-top: 20px;"></div>\n      </section>\n    ')}),n)})))()},afterRender:function(){return On(Pn().m((function n(){var e,t,r,o,a,i,s,c;return Pn().w((function(n){for(;;)switch(n.n){case 0:return e={showMessageBox:"function"==typeof window.showMessageBox?window.showMessageBox:function(n,e){return console.log("[Message: ".concat(e,"] ").concat(n))},showModalMessageBox:"function"==typeof window.showModalMessageBox?window.showModalMessageBox:function(n,e){return console.log("[Modal: ".concat(n,"] ").concat(e))}},t=e.showModalMessageBox,r=new pn(wn),o=document.querySelector("#stories"),a=document.querySelector("#loading"),i=document.querySelector("#error-container"),s=document.querySelector("#map"),c=new T({view:{showLoading:function(){a.style.display="block",o.innerHTML="",i.style.display="none"},hideLoading:function(){a.style.display="none"},showError:function(n){i.innerHTML='<p class="error-message">Error: '.concat(n.message||"Something went wrong","</p>"),i.style.display="block",o.innerHTML="",t("Gagal Memuat Cerita",n.message||"Terjadi kesalahan saat memuat cerita.")},showLoginError:function(){i.innerHTML='<div class="empty-state">Silakan login terlebih dahulu untuk melihat cerita.</div>',i.style.display="block",o.innerHTML="",t("Akses Ditolak","Silakan login terlebih dahulu untuk melihat cerita.")},showEmptyStories:function(){o.innerHTML='<div class="empty-state">Tidak ada cerita yang tersedia</div>'},showStories:function(n){console.log("🔍 DEBUG: Stories received in view:",n),console.log("🔍 DEBUG: Stories length in view:",n.length),n.length>0&&(console.log("🔍 DEBUG: First story in view:",n[0]),console.log("🔍 DEBUG: Story keys in view:",Object.keys(n[0]))),n.length>0?(o.innerHTML="",n.forEach((function(n,e){console.log("🔍 DEBUG: Processing story ".concat(e,":"),n);var t=v(n);console.log("🔍 DEBUG: Generated template for story ".concat(e,":"),t),o.innerHTML+=t}))):this.showEmptyStories(),s?this.renderMap(n):(console.error("HomePage: Elemen peta (#map) tidak ditemukan di DOM."),t("Error Peta","Elemen peta tidak ditemukan di halaman beranda."))},showMapError:function(n){s&&(s.innerHTML='<div class="error-message">Map tidak dapat dimuat: '.concat(n,"</div>"),s.style.display="block",t("Error Peta","Peta tidak dapat dimuat: ".concat(n)))},renderMap:function(n){try{if(!s||void 0===Sn())return void this.showMapError("Leaflet JS tidak ditemukan atau container peta tidak ada.");if(s._leaflet_id){var e=Mn.getMapInstance("map");e&&(e.remove(),console.log("MapHelper: Peta lama di beranda dihapus."))}var r=n.length>0&&n[0].latitude?n[0].latitude:-2.5489,o=n.length>0&&n[0].longitude?n[0].longitude:118.0149,a=Mn.initMap("map",{lat:r,lng:o,zoom:n.length>0?5:4});a?(n.filter((function(n){return n.latitude&&n.longitude})).forEach((function(n){Sn().marker([n.latitude,n.longitude]).addTo(a).bindPopup("<b>".concat(n.title,"</b><br>").concat(n.location||"Lokasi tidak diketahui")).on("click",(function(){window.location.hash="#/detail/".concat(n.id)}))})),a.invalidateSize()):(console.error("Leaflet map instance not found for rendering markers in home page."),t("Error Peta","Instans peta Leaflet tidak ditemukan untuk menampilkan marker di beranda."))}catch(n){this.showMapError(n.message)}}},storyRepository:r}),n.n=1,c.init();case 1:return n.a(2)}}),n)})))()}};function Bn(n){return Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Bn(n)}function In(){var n,e,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,r,o,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return An(l,"_invoke",function(t,r,o){var a,s,c,l=0,u=o||[],d=!1,f={p:0,n:0,v:n,a:p,f:p.bind(n,4),d:function(e,t){return a=e,s=0,c=n,f.n=t,i}};function p(t,r){for(s=t,c=r,e=0;!d&&l&&!o&&e<u.length;e++){var o,a=u[e],p=f.p,h=a[2];t>3?(o=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=n):a[0]<=p&&((o=t<2&&p<a[1])?(s=0,f.v=r,f.n=a[1]):p<h&&(o=t<3||a[0]>r||r>h)&&(a[4]=t,a[5]=r,f.n=h,s=0))}if(o||t>1)return i;throw d=!0,r}return function(o,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),s=u,c=h;(e=s<2?n:c)||!d;){a||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(l=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=n}else if((e=(d=f.n<0)?c:t.call(r,f))!==i)break}catch(e){a=n,s=1,c=e}finally{l=1}}return{value:e,done:d}}}(t,o,a),!0),l}var i={};function s(){}function c(){}function l(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(An(e={},r,(function(){return this})),e),d=l.prototype=s.prototype=Object.create(u);function f(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,l):(n.__proto__=l,An(n,o,"GeneratorFunction")),n.prototype=Object.create(d),n}return c.prototype=l,An(d,"constructor",l),An(l,"constructor",c),c.displayName="GeneratorFunction",An(l,o,"GeneratorFunction"),An(d),An(d,o,"Generator"),An(d,r,(function(){return this})),An(d,"toString",(function(){return"[object Generator]"})),(In=function(){return{w:a,m:f}})()}function An(n,e,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(n){o=0}An=function(n,e,t,r){if(e)o?o(n,e,{value:t,enumerable:!r,configurable:!r,writable:!r}):n[e]=t;else{var a=function(e,t){An(n,e,(function(n){return this._invoke(e,t,n)}))};a("next",0),a("throw",1),a("return",2)}},An(n,e,t,r)}function Gn(n,e,t,r,o,a,i){try{var s=n[a](i),c=s.value}catch(n){return void t(n)}s.done?e(c):Promise.resolve(c).then(r,o)}function Dn(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Rn(r.key),r)}}function Rn(n){var e=function(n){if("object"!=Bn(n)||!n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var t=e.call(n,"string");if("object"!=Bn(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==Bn(e)?e:e+""}const Cn=function(){return n=function n(e){var t=e.view;!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this._view=t,this._storyApiSource=wn,this._initListeners()},e=[{key:"_initListeners",value:function(){"function"==typeof this._view.setAddStoryHandler?this._view.setAddStoryHandler(this._addStory.bind(this)):console.error("View passed to AddStoryPresenter is missing setAddStoryHandler method.")}},{key:"_addStory",value:(t=In().m((function n(e){var t;return In().w((function(n){for(;;)switch(n.n){case 0:if(n.p=0,k()){n.n=1;break}return"function"==typeof this._view.showError&&this._view.showError(new Error("Anda harus login untuk menambahkan cerita.")),window.location.hash="#/login",n.a(2);case 1:return"function"==typeof this._view.showLoading&&this._view.showLoading(!0),n.n=2,this._storyApiSource.addStory(e);case 2:"function"==typeof this._view.showLoading&&this._view.showLoading(!1),"function"==typeof this._view.showSuccess?this._view.showSuccess():(console.log("Cerita berhasil ditambahkan! Mengarahkan ke halaman utama."),window.location.hash="/"),n.n=4;break;case 3:n.p=3,t=n.v,"function"==typeof this._view.showLoading&&this._view.showLoading(!1),"function"==typeof this._view.showError?this._view.showError(t):(console.error("Terjadi kesalahan saat menambahkan cerita:",t),alert("Terjadi kesalahan saat menambahkan cerita: "+t.message));case 4:return n.a(2)}}),n,this,[[0,3]])})),r=function(){var n=this,e=arguments;return new Promise((function(r,o){var a=t.apply(n,e);function i(n){Gn(a,r,o,i,s,"next",n)}function s(n){Gn(a,r,o,i,s,"throw",n)}i(void 0)}))},function(n){return r.apply(this,arguments)})}],e&&Dn(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,e,t,r}();function Fn(n){return Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Fn(n)}function Hn(){var n,e,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,r,o,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return Un(l,"_invoke",function(t,r,o){var a,s,c,l=0,u=o||[],d=!1,f={p:0,n:0,v:n,a:p,f:p.bind(n,4),d:function(e,t){return a=e,s=0,c=n,f.n=t,i}};function p(t,r){for(s=t,c=r,e=0;!d&&l&&!o&&e<u.length;e++){var o,a=u[e],p=f.p,h=a[2];t>3?(o=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=n):a[0]<=p&&((o=t<2&&p<a[1])?(s=0,f.v=r,f.n=a[1]):p<h&&(o=t<3||a[0]>r||r>h)&&(a[4]=t,a[5]=r,f.n=h,s=0))}if(o||t>1)return i;throw d=!0,r}return function(o,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),s=u,c=h;(e=s<2?n:c)||!d;){a||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(l=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=n}else if((e=(d=f.n<0)?c:t.call(r,f))!==i)break}catch(e){a=n,s=1,c=e}finally{l=1}}return{value:e,done:d}}}(t,o,a),!0),l}var i={};function s(){}function c(){}function l(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(Un(e={},r,(function(){return this})),e),d=l.prototype=s.prototype=Object.create(u);function f(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,l):(n.__proto__=l,Un(n,o,"GeneratorFunction")),n.prototype=Object.create(d),n}return c.prototype=l,Un(d,"constructor",l),Un(l,"constructor",c),c.displayName="GeneratorFunction",Un(l,o,"GeneratorFunction"),Un(d),Un(d,o,"Generator"),Un(d,r,(function(){return this})),Un(d,"toString",(function(){return"[object Generator]"})),(Hn=function(){return{w:a,m:f}})()}function Un(n,e,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(n){o=0}Un=function(n,e,t,r){if(e)o?o(n,e,{value:t,enumerable:!r,configurable:!r,writable:!r}):n[e]=t;else{var a=function(e,t){Un(n,e,(function(n){return this._invoke(e,t,n)}))};a("next",0),a("throw",1),a("return",2)}},Un(n,e,t,r)}function zn(n,e,t,r,o,a,i){try{var s=n[a](i),c=s.value}catch(n){return void t(n)}s.done?e(c):Promise.resolve(c).then(r,o)}function Nn(n){return function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(n){zn(a,r,o,i,s,"next",n)}function s(n){zn(a,r,o,i,s,"throw",n)}i(void 0)}))}}function qn(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Wn(r.key),r)}}function Wn(n){var e=function(n){if("object"!=Fn(n)||!n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var t=e.call(n,"string");if("object"!=Fn(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==Fn(e)?e:e+""}function Kn(){var n="function"==typeof window.showMessageBox?window.showMessageBox:function(n,e){return console.log("[Message: ".concat(e,"] ").concat(n))};return{showModalMessageBox:"function"==typeof window.showModalMessageBox?window.showModalMessageBox:function(n,e){return console.log("[Modal: ".concat(n,"] ").concat(e))},showMessageBox:n}}var Vn=function(){return n=function n(){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this._presenter=null,this._addStoryHandler=null,this._photoBlob=null,this._map=null,this._marker=null,this._form=null,this._photoPreview=null,this._cameraButton=null,this._fileButton=null,this._photoInput=null,this._camera=null,this._captureButton=null,this._canvas=null,this._selectedLocation=null,this._cancelButton=null,this._originalButtonText=null,this._stream=null,this._customIcon=null},e=[{key:"render",value:(o=Nn(Hn().m((function n(){return Hn().w((function(n){for(;;)if(0===n.n)return n.a(2,'\n      <div class="add-story-container">\n        <div class="add-story-card">\n          <div class="add-story-header">\n            <h2>Tambah Cerita Baru</h2>\n            <p>Bagikan pengalamanmu dengan foto dan lokasi</p>\n          </div>\n          \n          <form id="add-story-form">\n            <div class="form-group">\n              <label for="description">Cerita</label>\n              <textarea id="description" rows="4" placeholder="Ceritakan pengalamanmu..." required></textarea>\n            </div>\n            \n            <div class="form-group">\n              <label>Foto</label>\n              <div class="photo-container">\n                <div id="photo-preview" class="photo-preview">\n                  <div class="photo-placeholder">\n                    <i class="fa fa-image"></i>\n                    <p>Pratinjau foto akan muncul di sini</p>\n                  </div>\n                </div>\n                <div class="photo-actions">\n                  <button type="button" id="camera-button" class="btn-photo">\n                    <i class="fa fa-camera"></i> Kamera\n                  </button>\n                  <button type="button" id="file-button" class="btn-photo">\n                    <i class="fa fa-file-image"></i> Pilih File\n                  </button>\n                  <input type="file" id="photo-input" accept="image/*" style="display: none;">\n                </div>\n              </div>\n            </div>\n            \n            <div id="camera-container" style="display: none;">\n              <video id="camera" autoplay playsinline class="camera"></video>\n              <button type="button" id="capture-button" class="btn-capture">\n                <i class="fa fa-camera"></i> Ambil Foto\n              </button>\n              <canvas id="canvas" style="display: none;"></canvas>\n            </div>\n            \n            <div class="form-group">\n              <label>Lokasi (Klik pada peta)</label>\n              <div id="location-map" class="map" style="height: 350px;"></div> \n              <div id="selected-location" class="selected-location">\n                <i class="fa fa-map-marker-alt"></i>\n                <span>Belum ada lokasi dipilih</span>\n              </div>\n              <input type="hidden" id="lat" name="lat">\n              <input type="hidden" id="lon" name="lon">\n            </div>\n            \n            <div class="form-actions">\n              <button type="button" id="cancel-button" class="btn-secondary">Batal</button>\n              <button type="submit" class="btn-primary">Bagikan Cerita</button>\n            </div>\n          </form>\n        </div>\n      </div>\n    ')}),n)}))),function(){return o.apply(this,arguments)})},{key:"afterRender",value:(r=Nn(Hn().m((function n(){var e,t;return Hn().w((function(n){for(;;)switch(n.n){case 0:try{e=Kn(),t=e.showModalMessageBox,this._initializeElements(),this._presenter=new Cn({view:this}),document.getElementById("location-map")?(this._initializeMap(),this._attachEventListeners()):(console.error("AddStoryPage: Elemen peta (#location-map) tidak ditemukan di DOM."),t("Error Halaman","Elemen peta tidak ditemukan. Halaman mungkin tidak berfungsi dengan baik."))}catch(n){console.error("Error pada afterRender AddStoryPage:",n),showModalMessageBox("Error Render Halaman","Gagal memuat halaman tambah cerita.")}case 1:return n.a(2)}}),n,this)}))),function(){return r.apply(this,arguments)})},{key:"_initializeElements",value:function(){this._form=document.getElementById("add-story-form"),this._photoPreview=document.getElementById("photo-preview"),this._cameraButton=document.getElementById("camera-button"),this._fileButton=document.getElementById("file-button"),this._photoInput=document.getElementById("photo-input"),this._camera=document.getElementById("camera"),this._captureButton=document.getElementById("capture-button"),this._canvas=document.getElementById("canvas"),this._selectedLocation=document.getElementById("selected-location"),this._cancelButton=document.getElementById("cancel-button"),this._form||console.error("Form add-story-form tidak ditemukan"),this._photoPreview||console.error("Photo preview tidak ditemukan"),this._cameraButton||console.error("Camera button tidak ditemukan"),this._fileButton||console.error("File button tidak ditemukan"),this._photoInput||console.error("Photo input tidak ditemukan"),this._camera||console.error("Camera video element tidak ditemukan"),this._captureButton||console.error("Capture button tidak ditemukan"),this._canvas||console.error("Canvas element tidak ditemukan"),this._selectedLocation||console.error("Selected location element tidak ditemukan"),this._cancelButton||console.error("Cancel button tidak ditemukan")}},{key:"_initializeMap",value:function(){var n=this,e=Kn().showModalMessageBox;try{var t=document.getElementById("location-map");if(!t)return console.error("Element location-map tidak ditemukan. Tidak dapat menginisialisasi peta."),void e("Error Peta","Elemen peta tidak ditemukan di halaman tambah cerita.");if(void 0===Sn())return console.error("Leaflet JS tidak tersedia. Tidak dapat menginisialisasi peta."),void e("Error Peta","Library peta tidak ditemukan. Pastikan Leaflet dimuat dengan benar.");this._map=Mn.initMap("location-map",{lat:-2.5489,lng:118.0149,zoom:5}),this._map?(setTimeout((function(){n._map.invalidateSize()}),100),this._map.on("click",(function(e){var t=e.latlng,r=t.lat,o=t.lng;document.getElementById("lat").value=r,document.getElementById("lon").value=o,n._selectedLocation.innerHTML='\n            <i class="fa fa-map-marker-alt"></i>\n            <span>Lokasi dipilih: '.concat(r.toFixed(6),", ").concat(o.toFixed(6),'</span>\n            <button type="button" id="reset-location" class="btn-reset">\n              <i class="fa fa-times"></i>\n            </button>\n          ');var a=document.getElementById("reset-location");a&&a.addEventListener("click",(function(e){e.stopPropagation(),document.getElementById("lat").value="",document.getElementById("lon").value="",n._selectedLocation.innerHTML='\n                <i class="fa fa-map-marker-alt"></i>\n                <span>Belum ada lokasi dipilih</span>\n              ',n._marker&&(n._map.removeLayer(n._marker),n._marker=null)})),n._marker&&n._map.removeLayer(n._marker),n._marker=Sn().marker([r,o]).addTo(n._map)}))):(t.innerHTML='<div class="error-message">Map tidak dapat dimuat.</div>',e("Error Peta","Gagal menginisialisasi peta. Pastikan Leaflet dimuat dengan benar."))}catch(n){console.error("Error initializing map in AddStoryPage:",n);var r=document.getElementById("location-map");r&&(r.innerHTML='<div class="error-message">Map tidak dapat dimuat</div>'),e("Error Peta","Gagal memuat peta lokasi: "+n.message)}}},{key:"_attachEventListeners",value:function(){var n=this,e=Kn().showMessageBox;try{var t,r,o,a,i,s;null===(t=this._cameraButton)||void 0===t||t.addEventListener("click",this._activateCamera.bind(this)),null===(r=this._captureButton)||void 0===r||r.addEventListener("click",this._captureImage.bind(this)),null===(o=this._fileButton)||void 0===o||o.addEventListener("click",(function(){var e;return null===(e=n._photoInput)||void 0===e?void 0:e.click()})),null===(a=this._photoInput)||void 0===a||a.addEventListener("change",this._handleFileUpload.bind(this)),null===(i=this._cancelButton)||void 0===i||i.addEventListener("click",this._handleCancel.bind(this)),null===(s=this._form)||void 0===s||s.addEventListener("submit",(function(t){t.preventDefault();var r=document.getElementById("description").value,o=document.getElementById("lat").value,a=document.getElementById("lon").value;if(r)if(n._photoBlob){var i=new FormData;i.append("description",r),i.append("photo",n._photoBlob),o&&a&&(i.append("lat",o),i.append("lon",a)),n._addStoryHandler?n._addStoryHandler(i):(console.error("Add story handler not set in presenter."),e("Terjadi kesalahan saat memproses cerita.","error"))}else e("Silakan pilih atau ambil foto","error");else e("Cerita tidak boleh kosong","error")}))}catch(n){console.error("Error attaching event listeners:",n),e("Gagal menginisialisasi interaksi halaman.","error")}}},{key:"_activateCamera",value:(t=Nn(Hn().m((function n(){var e,t,r,o,a;return Hn().w((function(n){for(;;)switch(n.n){case 0:if(e=Kn(),t=e.showMessageBox,n.p=1,r=document.getElementById("camera-container")){n.n=2;break}return n.a(2);case 2:return r.style.display="block",n.n=3,navigator.mediaDevices.getUserMedia({video:!0});case 3:o=n.v,this._camera.srcObject=o,this._stream=o,n.n=5;break;case 4:n.p=4,a=n.v,console.error("Error accessing camera:",a),t("Tidak dapat mengakses kamera. Pastikan browser memiliki izin.","error");case 5:return n.a(2)}}),n,this,[[1,4]])}))),function(){return t.apply(this,arguments)})},{key:"_captureImage",value:function(){var n=this,e=Kn().showMessageBox;try{if(!this._camera||!this._canvas)return void e("Kamera atau canvas tidak siap.","error");var t=this._camera.videoWidth,r=this._camera.videoHeight;this._canvas.width=t,this._canvas.height=r,this._canvas.getContext("2d").drawImage(this._camera,0,0,t,r),this._canvas.toBlob((function(e){n._photoBlob=e;var t=new FileReader;t.onload=function(e){if(n._photoPreview){n._photoPreview.innerHTML='\n                <img src="'.concat(e.target.result,'" alt="Preview">\n                <button type="button" class="btn-remove-photo">\n                  <i class="fa fa-trash"></i>\n                </button>\n              ');var t=n._photoPreview.querySelector(".btn-remove-photo");t&&t.addEventListener("click",(function(){n._photoBlob=null,n._photoInput.value="",n._photoPreview.innerHTML='\n                    <div class="photo-placeholder">\n                      <i class="fa fa-image"></i>\n                      <p>Pratinjau foto akan muncul di sini</p>\n                    </div>\n                  '}))}},t.readAsDataURL(e),n._stopCamera(),document.getElementById("camera-container").style.display="none"}),"image/jpeg",.8)}catch(n){console.error("Error capturing image:",n),e("Gagal mengambil gambar","error")}}},{key:"_stopCamera",value:function(){this._stream&&(this._stream.getTracks().forEach((function(n){return n.stop()})),this._stream=null,this._camera&&(this._camera.srcObject=null))}},{key:"_handleFileUpload",value:function(n){var e=this,t=Kn().showMessageBox;try{var r=n.target.files[0];if(!r)return;if(!r.type.match("image.*"))return void t("Hanya file gambar yang diperbolehkan","error");this._photoBlob=r;var o=new FileReader;o.onload=function(n){if(e._photoPreview){e._photoPreview.innerHTML='\n            <img src="'.concat(n.target.result,'" alt="Preview">\n            <button type="button" class="btn-remove-photo">\n              <i class="fa fa-trash"></i>\n            </button>\n          ');var t=e._photoPreview.querySelector(".btn-remove-photo");t&&t.addEventListener("click",(function(){e._photoBlob=null,e._photoInput.value="",e._photoPreview.innerHTML='\n                <div class="photo-placeholder">\n                  <i class="fa fa-image"></i>\n                  <p>Pratinjau foto akan muncul di sini</p>\n                </div>\n              '}))}},o.readAsDataURL(r)}catch(n){console.error("Error handling file upload:",n),t("Gagal mengunggah file","error")}}},{key:"_handleCancel",value:function(){var n=Kn().showModalMessageBox;this._stopCamera(),n("Konfirmasi Batal","Apakah Anda yakin ingin membatalkan?",(function(n){n&&(window.location.hash="/")}),!0)}},{key:"setAddStoryHandler",value:function(n){this._addStoryHandler=n}},{key:"showLoading",value:function(){try{if(!this._form)return;var n=this._form.querySelector('button[type="submit"]');n&&(this._originalButtonText=n.innerHTML,n.innerHTML='<i class="fa fa-spinner fa-spin"></i> Mengirim...',n.disabled=!0)}catch(n){console.error("Error showing loading:",n)}}},{key:"hideLoading",value:function(){try{if(!this._form)return;var n=this._form.querySelector('button[type="submit"]');n&&this._originalButtonText&&(n.innerHTML=this._originalButtonText,n.disabled=!1)}catch(n){console.error("Error hiding loading:",n)}}},{key:"showSuccessMessage",value:function(n){(0,Kn().showMessageBox)(n,"success");try{if(this._form){var e=this._form.querySelector('button[type="submit"]');e&&(e.innerHTML='<i class="fa fa-check"></i> Berhasil!')}setTimeout((function(){window.location.hash="/"}),2e3)}catch(n){console.error("Error showing success message:",n),setTimeout((function(){window.location.hash="/"}),2e3)}}},{key:"showError",value:function(n){(0,Kn().showMessageBox)("Error: ".concat(n.message||"Terjadi kesalahan"),"error")}},{key:"resetForm",value:function(){try{this._form&&this._form.reset(),this._photoBlob=null,this._photoPreview&&(this._photoPreview.innerHTML='\n          <div class="photo-placeholder">\n            <i class="fa fa-image"></i>\n            <p>Pratinjau foto akan muncul di sini</p>\n          </div>\n        '),this._marker&&this._map&&(this._map.removeLayer(this._marker),this._marker=null),this._selectedLocation&&(this._selectedLocation.innerHTML='\n          <i class="fa fa-map-marker-alt"></i>\n          <span>Belum ada lokasi dipilih</span>\n        ');var n=document.getElementById("lat"),e=document.getElementById("lon");n&&(n.value=""),e&&(e.value="")}catch(n){console.error("Error resetting form:",n)}}}],e&&qn(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,e,t,r,o}();const Yn=Vn;function Jn(){var n,e,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,r,o,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return $n(l,"_invoke",function(t,r,o){var a,s,c,l=0,u=o||[],d=!1,f={p:0,n:0,v:n,a:p,f:p.bind(n,4),d:function(e,t){return a=e,s=0,c=n,f.n=t,i}};function p(t,r){for(s=t,c=r,e=0;!d&&l&&!o&&e<u.length;e++){var o,a=u[e],p=f.p,h=a[2];t>3?(o=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=n):a[0]<=p&&((o=t<2&&p<a[1])?(s=0,f.v=r,f.n=a[1]):p<h&&(o=t<3||a[0]>r||r>h)&&(a[4]=t,a[5]=r,f.n=h,s=0))}if(o||t>1)return i;throw d=!0,r}return function(o,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),s=u,c=h;(e=s<2?n:c)||!d;){a||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(l=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=n}else if((e=(d=f.n<0)?c:t.call(r,f))!==i)break}catch(e){a=n,s=1,c=e}finally{l=1}}return{value:e,done:d}}}(t,o,a),!0),l}var i={};function s(){}function c(){}function l(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):($n(e={},r,(function(){return this})),e),d=l.prototype=s.prototype=Object.create(u);function f(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,l):(n.__proto__=l,$n(n,o,"GeneratorFunction")),n.prototype=Object.create(d),n}return c.prototype=l,$n(d,"constructor",l),$n(l,"constructor",c),c.displayName="GeneratorFunction",$n(l,o,"GeneratorFunction"),$n(d),$n(d,o,"Generator"),$n(d,r,(function(){return this})),$n(d,"toString",(function(){return"[object Generator]"})),(Jn=function(){return{w:a,m:f}})()}function $n(n,e,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(n){o=0}$n=function(n,e,t,r){if(e)o?o(n,e,{value:t,enumerable:!r,configurable:!r,writable:!r}):n[e]=t;else{var a=function(e,t){$n(n,e,(function(n){return this._invoke(e,t,n)}))};a("next",0),a("throw",1),a("return",2)}},$n(n,e,t,r)}function Qn(n,e,t,r,o,a,i){try{var s=n[a](i),c=s.value}catch(n){return void t(n)}s.done?e(c):Promise.resolve(c).then(r,o)}function Xn(n){return function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(n){Qn(a,r,o,i,s,"next",n)}function s(n){Qn(a,r,o,i,s,"throw",n)}i(void 0)}))}}const Zn={render:function(){return Xn(Jn().m((function n(){return Jn().w((function(n){for(;;)if(0===n.n)return n.a(2,'\n        <section class="card">\n          <h2 class="text-xl font-semibold mb-4 text-gray-800">📖 StoryShare - Story App</h2>\n          <p class="text-gray-700">StoryShare adalah aplikasi berbasis web untuk membagikan cerita pribadi dalam bentuk teks dan gambar. Aplikasi ini memungkinkan pengguna untuk menulis cerita, melihat cerita dari pengguna lain, dan membagikan pengalaman mereka secara interaktif dengan fitur lokasi dan notifikasi.</p>\n          <p class="text-gray-700 mt-2">Dibuat untuk submission Dicoding Web Intermediate.</p>\n        </section>\n      ')}),n)})))()},afterRender:function(){return Xn(Jn().m((function n(){return Jn().w((function(n){for(;;)if(0===n.n)return n.a(2)}),n)})))()}},ne={parseActiveUrlWithCombiner:function(){var n=window.location.hash.slice(1),e=this._urlSplitter(n);return this._urlCombiner(e)},parseActiveUrlWithoutCombiner:function(){var n=window.location.hash.slice(1);return this._urlSplitter(n)},_urlSplitter:function(n){var e=n.split("/");return{resource:e[1]?e[1].toLowerCase():null,id:e[2]||null,verb:e[3]?e[3].toLowerCase():null}},_urlCombiner:function(n){return null===n.resource?"/":null===n.id?"/".concat(n.resource):null===n.verb?"/".concat(n.resource,"/:id"):"/".concat(n.resource,"/:id/").concat(n.verb)}};function ee(){var n,e,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,r,o,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return te(l,"_invoke",function(t,r,o){var a,s,c,l=0,u=o||[],d=!1,f={p:0,n:0,v:n,a:p,f:p.bind(n,4),d:function(e,t){return a=e,s=0,c=n,f.n=t,i}};function p(t,r){for(s=t,c=r,e=0;!d&&l&&!o&&e<u.length;e++){var o,a=u[e],p=f.p,h=a[2];t>3?(o=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=n):a[0]<=p&&((o=t<2&&p<a[1])?(s=0,f.v=r,f.n=a[1]):p<h&&(o=t<3||a[0]>r||r>h)&&(a[4]=t,a[5]=r,f.n=h,s=0))}if(o||t>1)return i;throw d=!0,r}return function(o,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),s=u,c=h;(e=s<2?n:c)||!d;){a||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(l=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=n}else if((e=(d=f.n<0)?c:t.call(r,f))!==i)break}catch(e){a=n,s=1,c=e}finally{l=1}}return{value:e,done:d}}}(t,o,a),!0),l}var i={};function s(){}function c(){}function l(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(te(e={},r,(function(){return this})),e),d=l.prototype=s.prototype=Object.create(u);function f(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,l):(n.__proto__=l,te(n,o,"GeneratorFunction")),n.prototype=Object.create(d),n}return c.prototype=l,te(d,"constructor",l),te(l,"constructor",c),c.displayName="GeneratorFunction",te(l,o,"GeneratorFunction"),te(d),te(d,o,"Generator"),te(d,r,(function(){return this})),te(d,"toString",(function(){return"[object Generator]"})),(ee=function(){return{w:a,m:f}})()}function te(n,e,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(n){o=0}te=function(n,e,t,r){if(e)o?o(n,e,{value:t,enumerable:!r,configurable:!r,writable:!r}):n[e]=t;else{var a=function(e,t){te(n,e,(function(n){return this._invoke(e,t,n)}))};a("next",0),a("throw",1),a("return",2)}},te(n,e,t,r)}function re(n,e,t,r,o,a,i){try{var s=n[a](i),c=s.value}catch(n){return void t(n)}s.done?e(c):Promise.resolve(c).then(r,o)}function oe(n){return function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(n){re(a,r,o,i,s,"next",n)}function s(n){re(a,r,o,i,s,"throw",n)}i(void 0)}))}}function ae(n){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ae(n)}function ie(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,se(r.key),r)}}function se(n){var e=function(n){if("object"!=ae(n)||!n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var t=e.call(n,"string");if("object"!=ae(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==ae(e)?e:e+""}const ce=function(){return n=function n(e){var t=e.view,r=e.storyRepository,o=e.id;!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this._view=t,this._storyRepository=r,this._id=o,console.log("🐛 DetailPresenter constructor:",{id:this._id,idType:ae(this._id),view:!!this._view,repository:!!this._storyRepository})},e=[{key:"init",value:(r=oe(ee().m((function n(){return ee().w((function(n){for(;;)switch(n.n){case 0:return n.n=1,this._showStory();case 1:return n.a(2)}}),n,this)}))),function(){return r.apply(this,arguments)})},{key:"_showStory",value:(t=oe(ee().m((function n(){var e,t,r;return ee().w((function(n){for(;;)switch(n.n){case 0:if(this._view.showLoading(),n.p=1,console.log("🐛 DetailPresenter: ID info:",{originalId:this._id,idType:ae(this._id),idLength:null===(e=this._id)||void 0===e?void 0:e.length,currentUrl:window.location.hash,parsedUrl:window.location.hash.split("/")}),this._id&&"undefined"!==this._id&&"null"!==this._id){n.n=2;break}throw new Error("ID cerita tidak valid");case 2:return console.log("DetailPresenter: Mencoba mengambil cerita dengan ID:",this._id),n.n=3,this._storyRepository.getStoryDetail(this._id);case 3:if(t=n.v){n.n=4;break}throw console.error("DetailPresenter: Cerita dengan ID",this._id,"tidak ditemukan dari repository."),new Error("Cerita tidak ditemukan atau gagal dimuat.");case 4:console.log("DetailPresenter: Cerita berhasil diambil:",t),this._view.showStoryDetail(t),n.n=6;break;case 5:n.p=5,r=n.v,console.error("DetailPresenter: Error saat menampilkan cerita:",r),this._view.showError(r);case 6:return n.p=6,this._view.hideLoading(),n.f(6);case 7:return n.a(2)}}),n,this,[[1,5,6,7]])}))),function(){return t.apply(this,arguments)})}],e&&ie(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,e,t,r}();function le(n){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},le(n)}function ue(){var n,e,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,r,o,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return de(l,"_invoke",function(t,r,o){var a,s,c,l=0,u=o||[],d=!1,f={p:0,n:0,v:n,a:p,f:p.bind(n,4),d:function(e,t){return a=e,s=0,c=n,f.n=t,i}};function p(t,r){for(s=t,c=r,e=0;!d&&l&&!o&&e<u.length;e++){var o,a=u[e],p=f.p,h=a[2];t>3?(o=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=n):a[0]<=p&&((o=t<2&&p<a[1])?(s=0,f.v=r,f.n=a[1]):p<h&&(o=t<3||a[0]>r||r>h)&&(a[4]=t,a[5]=r,f.n=h,s=0))}if(o||t>1)return i;throw d=!0,r}return function(o,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),s=u,c=h;(e=s<2?n:c)||!d;){a||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(l=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=n}else if((e=(d=f.n<0)?c:t.call(r,f))!==i)break}catch(e){a=n,s=1,c=e}finally{l=1}}return{value:e,done:d}}}(t,o,a),!0),l}var i={};function s(){}function c(){}function l(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(de(e={},r,(function(){return this})),e),d=l.prototype=s.prototype=Object.create(u);function f(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,l):(n.__proto__=l,de(n,o,"GeneratorFunction")),n.prototype=Object.create(d),n}return c.prototype=l,de(d,"constructor",l),de(l,"constructor",c),c.displayName="GeneratorFunction",de(l,o,"GeneratorFunction"),de(d),de(d,o,"Generator"),de(d,r,(function(){return this})),de(d,"toString",(function(){return"[object Generator]"})),(ue=function(){return{w:a,m:f}})()}function de(n,e,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(n){o=0}de=function(n,e,t,r){if(e)o?o(n,e,{value:t,enumerable:!r,configurable:!r,writable:!r}):n[e]=t;else{var a=function(e,t){de(n,e,(function(n){return this._invoke(e,t,n)}))};a("next",0),a("throw",1),a("return",2)}},de(n,e,t,r)}function fe(n,e,t,r,o,a,i){try{var s=n[a](i),c=s.value}catch(n){return void t(n)}s.done?e(c):Promise.resolve(c).then(r,o)}function pe(n){return function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(n){fe(a,r,o,i,s,"next",n)}function s(n){fe(a,r,o,i,s,"throw",n)}i(void 0)}))}}const he={render:function(){return pe(ue().m((function n(){return ue().w((function(n){for(;;)if(0===n.n)return n.a(2,'\n      <div class="content">\n        <h2 class="content__heading">Story Detail</h2>\n        <div id="story" class="story"></div>\n        <div id="loading" class="loading-indicator" style="display: none;">Memuat...</div>\n        <div id="error-container" class="error-container" style="display: none;"></div>\n        \x3c!-- Tambahkan container untuk peta --\x3e\n        <div id="detail-map-container" style="height: 400px; margin-top: 20px;"></div>\n      </div>\n    ')}),n)})))()},afterRender:function(){return pe(ue().m((function n(){var e,t,r,o,a,i,s,c,l,u,d;return ue().w((function(n){for(;;)switch(n.n){case 0:if(e={showModalMessageBox:"function"==typeof window.showModalMessageBox?window.showModalMessageBox:function(n,e){return console.log("[Modal: ".concat(n,"] ").concat(e))}},t=e.showModalMessageBox,r=document.querySelector("#story"),o=document.querySelector("#loading"),a=document.querySelector("#error-container"),i=document.querySelector("#detail-map-container"),s=ne.parseActiveUrlWithoutCombiner(),c=s.id,console.log("🐛 DetailPage afterRender:",{currentHash:window.location.hash,currentHashRaw:window.location.hash.slice(1),parsedUrl:s,rawId:c,idType:le(c),hashParts:window.location.hash.slice(1).split("/")}),c&&""!==c.trim()&&"undefined"!==c&&"null"!==c){n.n=1;break}return console.error("❌ DetailPage: Invalid or missing story ID:",{id:c,hash:window.location.hash,urlParts:window.location.hash.slice(1).split("/")}),t("Error Navigasi","ID cerita tidak ditemukan di URL. Pastikan Anda mengakses link yang benar."),a.innerHTML='\n          <div class="error-message">\n            <h3>Error: ID cerita tidak valid</h3>\n            <p>URL saat ini: <code>'.concat(window.location.hash,"</code></p>\n            <p>ID yang terdeteksi: <code>").concat(c||"null",'</code></p>\n            <button onclick="window.location.hash=\'#/\'" class="btn-back">← Kembali ke Beranda</button>\n          </div>\n        '),a.style.display="block",o.style.display="none",n.a(2);case 1:return c=c.trim(),console.log("✅ DetailPage: Using cleaned story ID:",{original:s.id,cleaned:c,length:c.length}),l=new pn(wn),u={showLoading:function(){console.log("🔄 DetailPage View: Showing loading..."),o.style.display="block",r.innerHTML="",a.style.display="none"},hideLoading:function(){console.log("✅ DetailPage View: Hiding loading..."),o.style.display="none"},showError:function(n){console.error("❌ DetailPage View: Showing error:",n);var e="Gagal memuat detail cerita.",o=n.message||"Unknown error",i=[];n.message.includes("tidak ditemukan")||n.message.includes("404")?(e="Cerita tidak ditemukan",i=["Pastikan ID cerita benar","Cerita mungkin sudah dihapus","Coba refresh halaman atau kembali ke beranda"]):n.message.includes("network")||n.message.includes("fetch")?(e="Masalah koneksi jaringan",i=["Periksa koneksi internet Anda","Coba refresh halaman","Server mungkin sedang bermasalah"]):(n.message.includes("401")||n.message.includes("unauthorized"))&&(e="Sesi telah berakhir",i=["Silakan login kembali","Token akses mungkin sudah kedaluwarsa"]),a.innerHTML='\n          <div class="error-message">\n            <h3>❌ '.concat(e,"</h3>\n            <p><strong>ID Cerita:</strong> <code>").concat(c,"</code></p>\n            <p><strong>Detail Error:</strong> ").concat(o,"</p>\n            ").concat(i.length>0?'\n              <div class="error-suggestions">\n                <p><strong>Saran:</strong></p>\n                <ul>\n                  '.concat(i.map((function(n){return"<li>".concat(n,"</li>")})).join(""),"\n                </ul>\n              </div>\n            "):"",'\n            <div class="error-actions">\n              <button onclick="window.location.reload()" class="btn-retry">🔄 Coba Lagi</button>\n              <button onclick="window.location.hash=\'#/\'" class="btn-back">← Kembali ke Beranda</button>\n            </div>\n          </div>\n        '),a.style.display="block",r.innerHTML="",t("Error Memuat Cerita",e)},showStoryDetail:function(n){if(console.log("✅ DetailPage View: Showing story detail:",n),!n||!n.id)return console.error("❌ Invalid story data received:",n),void this.showError(new Error("Data cerita tidak valid dari server"));r.innerHTML=b(n),n.latitude&&n.longitude?(console.log("🗺️ Rendering map for story location"),this.renderMap(n.latitude,n.longitude,n.location||"Lokasi Cerita")):(console.log("ℹ️ No location data available for map"),i&&(i.style.display="none"));var e=document.getElementById("saveStoryBtn");e?e.addEventListener("click",function(){var r=pe(ue().m((function r(o){var a,i;return ue().w((function(r){for(;;)switch(r.n){case 0:return o.preventDefault(),console.log("🔄 Save button clicked, story:",n),e.disabled=!0,e.innerHTML='<i class="fas fa-spinner fa-spin"></i> Menyimpan...',r.p=1,r.n=2,new Promise((function(n){"function"==typeof t&&t.length>=3?t("Konfirmasi Simpan","Apakah Anda yakin ingin menyimpan cerita ini?",n,!0):n(confirm("Apakah Anda yakin ingin menyimpan cerita ini?"))}));case 2:if(!r.v){r.n=6;break}if(console.log("🔄 User confirmed, saving story..."),l){r.n=3;break}throw new Error("StoryRepository tidak tersedia");case 3:if("function"==typeof l.saveStory){r.n=4;break}throw new Error("Method saveStory tidak tersedia di StoryRepository");case 4:return r.n=5,l.saveStory(n);case 5:e.innerHTML='<i class="fas fa-check"></i> Tersimpan!',e.classList.add("success"),setTimeout((function(){e.innerHTML='<i class="fas fa-bookmark"></i> Simpan Story',e.classList.remove("success"),e.disabled=!1}),2e3),console.log("✅ Story saved successfully"),r.n=7;break;case 6:console.log("ℹ️ User cancelled save operation"),e.innerHTML='<i class="fas fa-bookmark"></i> Simpan Story',e.disabled=!1;case 7:r.n=9;break;case 8:r.p=8,i=r.v,console.error("❌ Failed to save story:",i),e.innerHTML='<i class="fas fa-exclamation-triangle"></i> Gagal Menyimpan',e.classList.add("error"),e.disabled=!1,a=i.message||"Terjadi kesalahan saat menyimpan cerita",t("Simpan Gagal",a),setTimeout((function(){e.innerHTML='<i class="fas fa-bookmark"></i> Simpan Story',e.classList.remove("error")}),3e3);case 9:return r.a(2)}}),r,null,[[1,8]])})));return function(n){return r.apply(this,arguments)}}()):console.error("❌ Save button not found in DOM");var o=document.getElementById("tryNotificationBtn");o&&o.addEventListener("click",(function(){console.log("🔔 Notification button clicked"),t("Notifikasi Percobaan","Anda akan mendapatkan notifikasi untuk: ".concat(n.title))}));var a=document.getElementById("backToListBtn");a&&a.addEventListener("click",(function(){console.log("🔙 Back button clicked"),window.location.hash="#/"}))},renderMap:function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Lokasi Cerita";if(i&&"undefined"!=typeof L){i.id="map-instance",i.style.display="block";try{Mn.initMap(document.getElementById("map-instance"),{lat:n,lng:e,zoom:13});var r=Mn.getMapInstance(document.getElementById("map-instance"));if(!r)throw new Error("Map instance not found");L.marker([n,e]).addTo(r).bindPopup(t).openPopup(),r.invalidateSize(),console.log("✅ Map rendered successfully")}catch(n){console.error("❌ Error rendering map:",n),i.innerHTML='<div class="error-message">Peta tidak dapat dimuat.</div>'}}else console.warn("⚠️ Map container or Leaflet JS not available"),i&&(i.innerHTML='<div class="info-message">Peta lokasi tidak tersedia.</div>',i.style.display="block")}},console.log("🚀 Initializing DetailPresenter with cleaned ID:",c),d=new ce({view:u,storyRepository:l,id:c}),n.n=2,d.init();case 2:return n.a(2)}}),n)})))()}};function me(n){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},me(n)}function ge(){var n,e,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,r,o,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return ye(l,"_invoke",function(t,r,o){var a,s,c,l=0,u=o||[],d=!1,f={p:0,n:0,v:n,a:p,f:p.bind(n,4),d:function(e,t){return a=e,s=0,c=n,f.n=t,i}};function p(t,r){for(s=t,c=r,e=0;!d&&l&&!o&&e<u.length;e++){var o,a=u[e],p=f.p,h=a[2];t>3?(o=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=n):a[0]<=p&&((o=t<2&&p<a[1])?(s=0,f.v=r,f.n=a[1]):p<h&&(o=t<3||a[0]>r||r>h)&&(a[4]=t,a[5]=r,f.n=h,s=0))}if(o||t>1)return i;throw d=!0,r}return function(o,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),s=u,c=h;(e=s<2?n:c)||!d;){a||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(l=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=n}else if((e=(d=f.n<0)?c:t.call(r,f))!==i)break}catch(e){a=n,s=1,c=e}finally{l=1}}return{value:e,done:d}}}(t,o,a),!0),l}var i={};function s(){}function c(){}function l(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(ye(e={},r,(function(){return this})),e),d=l.prototype=s.prototype=Object.create(u);function f(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,l):(n.__proto__=l,ye(n,o,"GeneratorFunction")),n.prototype=Object.create(d),n}return c.prototype=l,ye(d,"constructor",l),ye(l,"constructor",c),c.displayName="GeneratorFunction",ye(l,o,"GeneratorFunction"),ye(d),ye(d,o,"Generator"),ye(d,r,(function(){return this})),ye(d,"toString",(function(){return"[object Generator]"})),(ge=function(){return{w:a,m:f}})()}function ye(n,e,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(n){o=0}ye=function(n,e,t,r){if(e)o?o(n,e,{value:t,enumerable:!r,configurable:!r,writable:!r}):n[e]=t;else{var a=function(e,t){ye(n,e,(function(n){return this._invoke(e,t,n)}))};a("next",0),a("throw",1),a("return",2)}},ye(n,e,t,r)}function ve(n,e,t,r,o,a,i){try{var s=n[a](i),c=s.value}catch(n){return void t(n)}s.done?e(c):Promise.resolve(c).then(r,o)}function be(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,we(r.key),r)}}function we(n){var e=function(n){if("object"!=me(n)||!n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var t=e.call(n,"string");if("object"!=me(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==me(e)?e:e+""}const ke=function(){return n=function n(e){var t=e.view;!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this._view=t,this._storyRepository=new pn(wn),this._listenToLoginForm()},e=[{key:"_listenToLoginForm",value:function(){this._view.setLoginHandler(this._login.bind(this))}},{key:"_login",value:(t=ge().m((function n(e){var t,r;return ge().w((function(n){for(;;)switch(n.n){case 0:return n.p=0,this._validateLoginData(e),this._view.showLoading(),n.n=1,this._storyRepository.login(e);case 1:if((t=n.v)&&t.loginResult&&t.loginResult.token){n.n=2;break}throw new Error("Response login tidak valid");case 2:o=t.loginResult.token,localStorage.setItem("token",o),console.log("Login berhasil, token disimpan"),this._view.redirectToHome(),n.n=4;break;case 3:n.p=3,r=n.v,console.error("Error during login:",r),this._view.showError(r);case 4:return n.p=4,this._view.hideLoading(),n.f(4);case 5:return n.a(2)}var o}),n,this,[[0,3,4,5]])})),r=function(){var n=this,e=arguments;return new Promise((function(r,o){var a=t.apply(n,e);function i(n){ve(a,r,o,i,s,"next",n)}function s(n){ve(a,r,o,i,s,"throw",n)}i(void 0)}))},function(n){return r.apply(this,arguments)})},{key:"_validateLoginData",value:function(n){var e=n.email,t=n.password;if(!e||!t)throw new Error("Email dan password wajib diisi");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))throw new Error("Format email tidak valid");if(t.length<6)throw new Error("Password minimal 6 karakter")}}],e&&be(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,e,t,r}();function Se(n){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Se(n)}function xe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,_e(r.key),r)}}function _e(n){var e=function(n){if("object"!=Se(n)||!n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var t=e.call(n,"string");if("object"!=Se(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==Se(e)?e:e+""}function Ee(){return{showModalMessageBox:"function"==typeof window.showModalMessageBox?window.showModalMessageBox:function(n,e){return console.log("[Modal: ".concat(n,"] ").concat(e))}}}const Me=function(){return n=function n(){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this._loginHandler=null,this._presenter=null},(e=[{key:"render",value:function(){return'\n      <div class="login-container">\n        <div class="login-card">\n          <div class="login-header">\n            <h2>Login ke StoryShare</h2>\n            <p>Bagikan cerita Anda dengan dunia</p>\n          </div>\n          <form id="loginForm" class="login-form">\n            <div class="form-group">\n              <label for="email">Email</label>\n              <div class="input-with-icon">\n                <i class="fas fa-envelope"></i>\n                <input type="email" id="email" name="email" placeholder="Masukkan email Anda" required>\n              </div>\n            </div>\n            \n            <div class="form-group">\n              <label for="password">Password</label>\n              <div class="input-with-icon">\n                <i class="fas fa-lock"></i>\n                <input type="password" id="password" name="password" placeholder="Masukkan password Anda" required>\n                <button type="button" id="togglePassword" class="toggle-password">\n                    <i class="fas fa-eye"></i>\n                </button>\n              </div>\n            </div>\n            \n            <div class="form-options">\n                <div class="remember-me">\n                    <input type="checkbox" id="rememberMe">\n                    <label for="rememberMe">Ingat saya</label>\n                </div>\n                <a href="#" class="forgot-password">Lupa Password?</a>\n            </div>\n            \n            <button type="submit" id="loginButton" class="btn-login">Login</button>\n            \n            <div class="login-footer">\n              Belum punya akun? <a href="#/register">Daftar di sini</a>\n            </div>\n          </form>\n        </div>\n      </div>\n    '}},{key:"afterRender",value:function(){this._presenter=new ke({view:this}),this._attachLoginFormListener();var n=document.getElementById("togglePassword"),e=document.getElementById("password");n&&e&&n.addEventListener("click",(function(){var t="password"===e.getAttribute("type")?"text":"password";e.setAttribute("type",t),n.querySelector("i").classList.toggle("fa-eye"),n.querySelector("i").classList.toggle("fa-eye-slash")}))}},{key:"_attachLoginFormListener",value:function(){var n=this,e=Ee().showModalMessageBox,t=document.querySelector("#loginForm");t&&t.addEventListener("submit",(function(t){t.preventDefault();var r=document.querySelector("#email").value,o=document.querySelector("#password").value;n._loginHandler?n._loginHandler({email:r,password:o}):(console.error("Login handler not set"),e("Login Error","Terjadi kesalahan saat login. Silakan coba lagi."))}))}},{key:"setLoginHandler",value:function(n){this._loginHandler=n}},{key:"showLoading",value:function(){var n=document.querySelector("#loginButton");n&&(n.textContent="Loading...",n.disabled=!0)}},{key:"hideLoading",value:function(){var n=document.querySelector("#loginButton");n&&(n.textContent="Login",n.disabled=!1)}},{key:"showError",value:function(n){(0,Ee().showModalMessageBox)("Login Gagal","Login gagal: ".concat(n.message))}},{key:"redirectToHome",value:function(){window.location.hash="#/"}}])&&xe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,e}();function Pe(n){return Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Pe(n)}function je(){var n,e,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,r,o,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return Te(l,"_invoke",function(t,r,o){var a,s,c,l=0,u=o||[],d=!1,f={p:0,n:0,v:n,a:p,f:p.bind(n,4),d:function(e,t){return a=e,s=0,c=n,f.n=t,i}};function p(t,r){for(s=t,c=r,e=0;!d&&l&&!o&&e<u.length;e++){var o,a=u[e],p=f.p,h=a[2];t>3?(o=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=n):a[0]<=p&&((o=t<2&&p<a[1])?(s=0,f.v=r,f.n=a[1]):p<h&&(o=t<3||a[0]>r||r>h)&&(a[4]=t,a[5]=r,f.n=h,s=0))}if(o||t>1)return i;throw d=!0,r}return function(o,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),s=u,c=h;(e=s<2?n:c)||!d;){a||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(l=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=n}else if((e=(d=f.n<0)?c:t.call(r,f))!==i)break}catch(e){a=n,s=1,c=e}finally{l=1}}return{value:e,done:d}}}(t,o,a),!0),l}var i={};function s(){}function c(){}function l(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(Te(e={},r,(function(){return this})),e),d=l.prototype=s.prototype=Object.create(u);function f(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,l):(n.__proto__=l,Te(n,o,"GeneratorFunction")),n.prototype=Object.create(d),n}return c.prototype=l,Te(d,"constructor",l),Te(l,"constructor",c),c.displayName="GeneratorFunction",Te(l,o,"GeneratorFunction"),Te(d),Te(d,o,"Generator"),Te(d,r,(function(){return this})),Te(d,"toString",(function(){return"[object Generator]"})),(je=function(){return{w:a,m:f}})()}function Te(n,e,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(n){o=0}Te=function(n,e,t,r){if(e)o?o(n,e,{value:t,enumerable:!r,configurable:!r,writable:!r}):n[e]=t;else{var a=function(e,t){Te(n,e,(function(n){return this._invoke(e,t,n)}))};a("next",0),a("throw",1),a("return",2)}},Te(n,e,t,r)}function Oe(n,e,t,r,o,a,i){try{var s=n[a](i),c=s.value}catch(n){return void t(n)}s.done?e(c):Promise.resolve(c).then(r,o)}function Le(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Be(r.key),r)}}function Be(n){var e=function(n){if("object"!=Pe(n)||!n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var t=e.call(n,"string");if("object"!=Pe(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==Pe(e)?e:e+""}const Ie=function(){return n=function n(e){var t=e.view;!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this._view=t,this._apiSource=wn},e=[{key:"registerUser",value:(t=je().m((function n(e){var t;return je().w((function(n){for(;;)switch(n.n){case 0:return n.p=0,this._view.showLoading(),n.n=1,this._apiSource.register({name:e.name,email:e.email,password:e.password});case 1:n.v,this._view.redirectToLogin(),n.n=3;break;case 2:n.p=2,t=n.v,console.error("Error during registration:",t),this._view.showError("Pendaftaran gagal: ".concat(t.message||"Terjadi kesalahan tidak dikenal."));case 3:return n.p=3,this._view.hideLoading(),n.f(3);case 4:return n.a(2)}}),n,this,[[0,2,3,4]])})),r=function(){var n=this,e=arguments;return new Promise((function(r,o){var a=t.apply(n,e);function i(n){Oe(a,r,o,i,s,"next",n)}function s(n){Oe(a,r,o,i,s,"throw",n)}i(void 0)}))},function(n){return r.apply(this,arguments)})}],e&&Le(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,e,t,r}();function Ae(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,r=document.getElementById("custom-message-box");r?(r.textContent=n,r.className="message-box ".concat(e," show"),setTimeout((function(){r.classList.remove("show"),r.textContent=""}),t)):(console.warn("Custom message box element not found!"),console.log("[Message: ".concat(e,"] ").concat(n)))}function Ge(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=document.getElementById("modal-message-box"),a=document.getElementById("modal-message-title"),i=document.getElementById("modal-message-text"),s=document.getElementById("modal-message-close"),c=document.getElementById("modal-message-confirm");o&&a&&i&&s&&c?(a.textContent=n,i.textContent=e,o.classList.add("show"),s.onclick=null,c.onclick=null,r?(c.style.display="inline-block",s.textContent="Batal",c.onclick=function(){o.classList.remove("show"),t&&"function"==typeof t&&t(!0)},s.onclick=function(){o.classList.remove("show"),t&&"function"==typeof t&&t(!1)}):(c.style.display="none",s.textContent="OK",s.onclick=function(){o.classList.remove("show"),t&&"function"==typeof t&&t()})):(console.warn("One or more modal message box elements not found!"),alert("[Modal: ".concat(n,"] ").concat(e)),t&&"function"==typeof t&&t())}function De(){return{showMessageBox:Ae,showModalMessageBox:Ge}}function Re(){var n,e,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,r,o,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return Ce(l,"_invoke",function(t,r,o){var a,s,c,l=0,u=o||[],d=!1,f={p:0,n:0,v:n,a:p,f:p.bind(n,4),d:function(e,t){return a=e,s=0,c=n,f.n=t,i}};function p(t,r){for(s=t,c=r,e=0;!d&&l&&!o&&e<u.length;e++){var o,a=u[e],p=f.p,h=a[2];t>3?(o=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=n):a[0]<=p&&((o=t<2&&p<a[1])?(s=0,f.v=r,f.n=a[1]):p<h&&(o=t<3||a[0]>r||r>h)&&(a[4]=t,a[5]=r,f.n=h,s=0))}if(o||t>1)return i;throw d=!0,r}return function(o,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),s=u,c=h;(e=s<2?n:c)||!d;){a||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(l=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=n}else if((e=(d=f.n<0)?c:t.call(r,f))!==i)break}catch(e){a=n,s=1,c=e}finally{l=1}}return{value:e,done:d}}}(t,o,a),!0),l}var i={};function s(){}function c(){}function l(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(Ce(e={},r,(function(){return this})),e),d=l.prototype=s.prototype=Object.create(u);function f(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,l):(n.__proto__=l,Ce(n,o,"GeneratorFunction")),n.prototype=Object.create(d),n}return c.prototype=l,Ce(d,"constructor",l),Ce(l,"constructor",c),c.displayName="GeneratorFunction",Ce(l,o,"GeneratorFunction"),Ce(d),Ce(d,o,"Generator"),Ce(d,r,(function(){return this})),Ce(d,"toString",(function(){return"[object Generator]"})),(Re=function(){return{w:a,m:f}})()}function Ce(n,e,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(n){o=0}Ce=function(n,e,t,r){if(e)o?o(n,e,{value:t,enumerable:!r,configurable:!r,writable:!r}):n[e]=t;else{var a=function(e,t){Ce(n,e,(function(n){return this._invoke(e,t,n)}))};a("next",0),a("throw",1),a("return",2)}},Ce(n,e,t,r)}function Fe(n,e,t,r,o,a,i){try{var s=n[a](i),c=s.value}catch(n){return void t(n)}s.done?e(c):Promise.resolve(c).then(r,o)}function He(n){return function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(n){Fe(a,r,o,i,s,"next",n)}function s(n){Fe(a,r,o,i,s,"throw",n)}i(void 0)}))}}function Ue(){var n,e,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,r,o,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return ze(l,"_invoke",function(t,r,o){var a,s,c,l=0,u=o||[],d=!1,f={p:0,n:0,v:n,a:p,f:p.bind(n,4),d:function(e,t){return a=e,s=0,c=n,f.n=t,i}};function p(t,r){for(s=t,c=r,e=0;!d&&l&&!o&&e<u.length;e++){var o,a=u[e],p=f.p,h=a[2];t>3?(o=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=n):a[0]<=p&&((o=t<2&&p<a[1])?(s=0,f.v=r,f.n=a[1]):p<h&&(o=t<3||a[0]>r||r>h)&&(a[4]=t,a[5]=r,f.n=h,s=0))}if(o||t>1)return i;throw d=!0,r}return function(o,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),s=u,c=h;(e=s<2?n:c)||!d;){a||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(l=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=n}else if((e=(d=f.n<0)?c:t.call(r,f))!==i)break}catch(e){a=n,s=1,c=e}finally{l=1}}return{value:e,done:d}}}(t,o,a),!0),l}var i={};function s(){}function c(){}function l(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(ze(e={},r,(function(){return this})),e),d=l.prototype=s.prototype=Object.create(u);function f(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,l):(n.__proto__=l,ze(n,o,"GeneratorFunction")),n.prototype=Object.create(d),n}return c.prototype=l,ze(d,"constructor",l),ze(l,"constructor",c),c.displayName="GeneratorFunction",ze(l,o,"GeneratorFunction"),ze(d),ze(d,o,"Generator"),ze(d,r,(function(){return this})),ze(d,"toString",(function(){return"[object Generator]"})),(Ue=function(){return{w:a,m:f}})()}function ze(n,e,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(n){o=0}ze=function(n,e,t,r){if(e)o?o(n,e,{value:t,enumerable:!r,configurable:!r,writable:!r}):n[e]=t;else{var a=function(e,t){ze(n,e,(function(n){return this._invoke(e,t,n)}))};a("next",0),a("throw",1),a("return",2)}},ze(n,e,t,r)}function Ne(n,e,t,r,o,a,i){try{var s=n[a](i),c=s.value}catch(n){return void t(n)}s.done?e(c):Promise.resolve(c).then(r,o)}function qe(n){return function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(n){Ne(a,r,o,i,s,"next",n)}function s(n){Ne(a,r,o,i,s,"throw",n)}i(void 0)}))}}var We={render:function(){return qe(Ue().m((function n(){return Ue().w((function(n){for(;;)if(0===n.n)return n.a(2,'\n        <section class="content">\n          <h2 class="content__heading">Cerita Tersimpan Anda</h2>\n          <div class="loading-indicator" id="loading-saved-stories" style="display: none;">Memuat cerita tersimpan...</div>\n          <div class="error-container" id="error-saved-stories" style="display: none;"></div>\n          <div id="saved-stories-list" class="stories"></div>\n        </section>\n      ')}),n)})))()},afterRender:function(){return qe(Ue().m((function n(){var e,t,r,o,a,i,s,c;return Ue().w((function(n){for(;;)switch(n.n){case 0:return e={showMessageBox:"function"==typeof window.showMessageBox?window.showMessageBox:function(n,e){return console.log("[Message: ".concat(e,"] ").concat(n))},showModalMessageBox:"function"==typeof window.showModalMessageBox?window.showModalMessageBox:function(n,e,t,r){console.log("[Modal: ".concat(n,"] ").concat(e)),t&&"function"==typeof t&&(r?t(confirm("".concat(n,": ").concat(e))):t())}},t=e.showMessageBox,r=e.showModalMessageBox,o=new pn(wn),a=document.querySelector("#loading-saved-stories"),i=document.querySelector("#error-saved-stories"),s=document.querySelector("#saved-stories-list"),c=function(){var n=qe(Ue().m((function n(){var e,t;return Ue().w((function(n){for(;;)switch(n.n){case 0:return a.style.display="block",i.style.display="none",s.innerHTML="",n.p=1,n.n=2,o.getSavedStories();case 2:0===(e=n.v).length?s.innerHTML='<div class="empty-state">Anda belum menyimpan cerita apapun.</div>':e.forEach((function(n){s.innerHTML+=w(n)})),n.n=4;break;case 3:n.p=3,t=n.v,console.error("Error fetching saved stories:",t),i.innerHTML='<p class="error-message">Gagal memuat cerita tersimpan: '.concat(t.message||"Terjadi kesalahan.","</p>"),i.style.display="block",r("Error","Gagal memuat cerita tersimpan.");case 4:return n.p=4,a.style.display="none",n.f(4);case 5:return n.a(2)}}),n,null,[[1,3,4,5]])})));return function(){return n.apply(this,arguments)}}(),n.n=1,c();case 1:s.addEventListener("click",function(){var n=qe(Ue().m((function n(e){var a,i,s;return Ue().w((function(n){for(;;)switch(n.n){case 0:if(console.log("Click event detected:",e.target),!(a=e.target.closest(".btn-delete"))){n.n=7;break}if(console.log("Delete button found:",a),i=a.dataset.id,console.log("Story ID to delete:",i),i){n.n=1;break}return console.error("Story ID is missing from delete button"),r("Error","ID cerita tidak ditemukan."),n.a(2);case 1:if(!confirm("Apakah Anda yakin ingin menghapus cerita ini dari daftar tersimpan?")){n.n=6;break}return n.p=2,console.log("Attempting to delete story with ID:",i),n.n=3,o.deleteSavedStory(i);case 3:return t("Cerita berhasil dihapus dari daftar tersimpan!","success"),n.n=4,c();case 4:n.n=6;break;case 5:n.p=5,s=n.v,console.error("Error deleting saved story:",s),r("Hapus Gagal","Gagal menghapus cerita: ".concat(s.message||"Terjadi kesalahan."));case 6:n.n=8;break;case 7:console.log("Delete button not found, clicked element:",e.target);case 8:return n.a(2)}}),n,null,[[2,5]])})));return function(e){return n.apply(this,arguments)}}());case 2:return n.a(2)}}),n)})))()}};const Ke={"/":Ln,"/login":Me,"/home":Ln,"/add":Yn,"/about":Zn,"/detail/:id":he,"/register":{render:function(){return He(Re().m((function n(){return Re().w((function(n){for(;;)if(0===n.n)return n.a(2,'\n            <div class="register-container">\n                <h2 class="text-xl font-semibold mb-4 text-center text-gray-800">Daftar Akun Baru</h2>\n                <form id="registerForm">\n                    <div class="form-group">\n                        <label for="name">Nama</label>\n                        <input type="text" id="name" name="name" placeholder="Masukkan nama Anda" required>\n                    </div>\n                    <div class="form-group">\n                        <label for="email">Email</label>\n                        <input type="email" id="email" name="email" placeholder="Masukkan email Anda" required>\n                    </div>\n                    <div class="form-group">\n                        <label for="password">Password</label>\n                        <input type="password" id="password" name="password" placeholder="Masukkan password" required>\n                    </div>\n                    <button type="submit" class="register-button btn-primary">Daftar</button>\n                </form>\n                <p class="text-center mt-4 text-gray-600">Sudah punya akun? <a href="#/login" class="text-primary-600 hover:underline">Login di sini</a></p>\n            </div>\n        ')}),n)})))()},afterRender:function(){var n=this;return He(Re().m((function e(){var t,r,o,a;return Re().w((function(e){for(;;)switch(e.n){case 0:t=document.querySelector("#registerForm"),r=new Ie({view:n}),o=De(),a=o.showModalMessageBox,t&&t.addEventListener("submit",function(){var n=He(Re().m((function n(e){var t,o,i,s;return Re().w((function(n){for(;;)switch(n.n){case 0:if(e.preventDefault(),t=document.querySelector("#name").value,o=document.querySelector("#email").value,i=document.querySelector("#password").value,t&&o&&i){n.n=1;break}return a("Error Pendaftaran","Semua kolom harus diisi!"),n.a(2);case 1:return n.p=1,n.n=2,r.registerUser({name:t,email:o,password:i});case 2:n.n=4;break;case 3:n.p=3,s=n.v,console.error("Register error:",s);case 4:return n.a(2)}}),n,null,[[1,3]])})));return function(e){return n.apply(this,arguments)}}());case 1:return e.a(2)}}),e)})))()},showLoading:function(){var n=document.querySelector(".register-button");n&&(n.textContent="Mendaftar...",n.disabled=!0)},hideLoading:function(){var n=document.querySelector(".register-button");n&&(n.textContent="Daftar",n.disabled=!1)},showError:function(n){(0,De().showModalMessageBox)("Error Pendaftaran",n)},redirectToLogin:function(){(0,De().showModalMessageBox)("Pendaftaran Berhasil","Akun Anda berhasil didaftarkan! Silakan login.",(function(){window.location.hash="#/login"}))}},"/saved":We};function Ve(){var n,e,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,r,o,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return Ye(l,"_invoke",function(t,r,o){var a,s,c,l=0,u=o||[],d=!1,f={p:0,n:0,v:n,a:p,f:p.bind(n,4),d:function(e,t){return a=e,s=0,c=n,f.n=t,i}};function p(t,r){for(s=t,c=r,e=0;!d&&l&&!o&&e<u.length;e++){var o,a=u[e],p=f.p,h=a[2];t>3?(o=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=n):a[0]<=p&&((o=t<2&&p<a[1])?(s=0,f.v=r,f.n=a[1]):p<h&&(o=t<3||a[0]>r||r>h)&&(a[4]=t,a[5]=r,f.n=h,s=0))}if(o||t>1)return i;throw d=!0,r}return function(o,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),s=u,c=h;(e=s<2?n:c)||!d;){a||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(l=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=n}else if((e=(d=f.n<0)?c:t.call(r,f))!==i)break}catch(e){a=n,s=1,c=e}finally{l=1}}return{value:e,done:d}}}(t,o,a),!0),l}var i={};function s(){}function c(){}function l(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(Ye(e={},r,(function(){return this})),e),d=l.prototype=s.prototype=Object.create(u);function f(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,l):(n.__proto__=l,Ye(n,o,"GeneratorFunction")),n.prototype=Object.create(d),n}return c.prototype=l,Ye(d,"constructor",l),Ye(l,"constructor",c),c.displayName="GeneratorFunction",Ye(l,o,"GeneratorFunction"),Ye(d),Ye(d,o,"Generator"),Ye(d,r,(function(){return this})),Ye(d,"toString",(function(){return"[object Generator]"})),(Ve=function(){return{w:a,m:f}})()}function Ye(n,e,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(n){o=0}Ye=function(n,e,t,r){if(e)o?o(n,e,{value:t,enumerable:!r,configurable:!r,writable:!r}):n[e]=t;else{var a=function(e,t){Ye(n,e,(function(n){return this._invoke(e,t,n)}))};a("next",0),a("throw",1),a("return",2)}},Ye(n,e,t,r)}function Je(n,e,t,r,o,a,i){try{var s=n[a](i),c=s.value}catch(n){return void t(n)}s.done?e(c):Promise.resolve(c).then(r,o)}var $e,Qe=function(){var n,e=(n=Ve().m((function n(e){var t,r;return Ve().w((function(n){for(;;)switch(n.n){case 0:if(!document.startViewTransition){n.n=5;break}return n.p=1,t=document.startViewTransition(e),n.n=2,t.finished;case 2:n.n=4;break;case 3:return n.p=3,r=n.v,console.error("View transition error:",r),n.n=4,e();case 4:n.n=6;break;case 5:return n.n=6,e();case 6:return n.a(2)}}),n,null,[[1,3]])})),function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(n){Je(a,r,o,i,s,"next",n)}function s(n){Je(a,r,o,i,s,"throw",n)}i(void 0)}))});return function(n){return e.apply(this,arguments)}}();function Xe(n){return Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Xe(n)}function Ze(){var n,e,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,r,o,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return nt(l,"_invoke",function(t,r,o){var a,s,c,l=0,u=o||[],d=!1,f={p:0,n:0,v:n,a:p,f:p.bind(n,4),d:function(e,t){return a=e,s=0,c=n,f.n=t,i}};function p(t,r){for(s=t,c=r,e=0;!d&&l&&!o&&e<u.length;e++){var o,a=u[e],p=f.p,h=a[2];t>3?(o=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=n):a[0]<=p&&((o=t<2&&p<a[1])?(s=0,f.v=r,f.n=a[1]):p<h&&(o=t<3||a[0]>r||r>h)&&(a[4]=t,a[5]=r,f.n=h,s=0))}if(o||t>1)return i;throw d=!0,r}return function(o,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),s=u,c=h;(e=s<2?n:c)||!d;){a||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(l=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=n}else if((e=(d=f.n<0)?c:t.call(r,f))!==i)break}catch(e){a=n,s=1,c=e}finally{l=1}}return{value:e,done:d}}}(t,o,a),!0),l}var i={};function s(){}function c(){}function l(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(nt(e={},r,(function(){return this})),e),d=l.prototype=s.prototype=Object.create(u);function f(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,l):(n.__proto__=l,nt(n,o,"GeneratorFunction")),n.prototype=Object.create(d),n}return c.prototype=l,nt(d,"constructor",l),nt(l,"constructor",c),c.displayName="GeneratorFunction",nt(l,o,"GeneratorFunction"),nt(d),nt(d,o,"Generator"),nt(d,r,(function(){return this})),nt(d,"toString",(function(){return"[object Generator]"})),(Ze=function(){return{w:a,m:f}})()}function nt(n,e,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(n){o=0}nt=function(n,e,t,r){if(e)o?o(n,e,{value:t,enumerable:!r,configurable:!r,writable:!r}):n[e]=t;else{var a=function(e,t){nt(n,e,(function(n){return this._invoke(e,t,n)}))};a("next",0),a("throw",1),a("return",2)}},nt(n,e,t,r)}function et(n,e,t,r,o,a,i){try{var s=n[a](i),c=s.value}catch(n){return void t(n)}s.done?e(c):Promise.resolve(c).then(r,o)}function tt(n){return function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(n){et(a,r,o,i,s,"next",n)}function s(n){et(a,r,o,i,s,"throw",n)}i(void 0)}))}}function rt(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,ot(r.key),r)}}function ot(n){var e=function(n){if("object"!=Xe(n)||!n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var t=e.call(n,"string");if("object"!=Xe(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==Xe(e)?e:e+""}function at(){var n,e,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,r,o,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return it(l,"_invoke",function(t,r,o){var a,s,c,l=0,u=o||[],d=!1,f={p:0,n:0,v:n,a:p,f:p.bind(n,4),d:function(e,t){return a=e,s=0,c=n,f.n=t,i}};function p(t,r){for(s=t,c=r,e=0;!d&&l&&!o&&e<u.length;e++){var o,a=u[e],p=f.p,h=a[2];t>3?(o=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=n):a[0]<=p&&((o=t<2&&p<a[1])?(s=0,f.v=r,f.n=a[1]):p<h&&(o=t<3||a[0]>r||r>h)&&(a[4]=t,a[5]=r,f.n=h,s=0))}if(o||t>1)return i;throw d=!0,r}return function(o,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),s=u,c=h;(e=s<2?n:c)||!d;){a||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(l=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=n}else if((e=(d=f.n<0)?c:t.call(r,f))!==i)break}catch(e){a=n,s=1,c=e}finally{l=1}}return{value:e,done:d}}}(t,o,a),!0),l}var i={};function s(){}function c(){}function l(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(it(e={},r,(function(){return this})),e),d=l.prototype=s.prototype=Object.create(u);function f(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,l):(n.__proto__=l,it(n,o,"GeneratorFunction")),n.prototype=Object.create(d),n}return c.prototype=l,it(d,"constructor",l),it(l,"constructor",c),c.displayName="GeneratorFunction",it(l,o,"GeneratorFunction"),it(d),it(d,o,"Generator"),it(d,r,(function(){return this})),it(d,"toString",(function(){return"[object Generator]"})),(at=function(){return{w:a,m:f}})()}function it(n,e,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(n){o=0}it=function(n,e,t,r){if(e)o?o(n,e,{value:t,enumerable:!r,configurable:!r,writable:!r}):n[e]=t;else{var a=function(e,t){it(n,e,(function(n){return this._invoke(e,t,n)}))};a("next",0),a("throw",1),a("return",2)}},it(n,e,t,r)}function st(n,e){var t="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=ct(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,o=function(){};return{s:o,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(n){throw n},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){t=t.call(n)},n:function(){var n=t.next();return i=n.done,n},e:function(n){s=!0,a=n},f:function(){try{i||null==t.return||t.return()}finally{if(s)throw a}}}}function ct(n,e){if(n){if("string"==typeof n)return lt(n,e);var t={}.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?lt(n,e):void 0}}function lt(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function ut(n,e,t,r,o,a,i){try{var s=n[a](i),c=s.value}catch(n){return void t(n)}s.done?e(c):Promise.resolve(c).then(r,o)}function dt(n){return function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(n){ut(a,r,o,i,s,"next",n)}function s(n){ut(a,r,o,i,s,"throw",n)}i(void 0)}))}}var ft,pt=new(function(){return n=function n(e){var t=e.content;!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this._content=t,this._publicRoutes=["/login","/register","/about"]},e=[{key:"renderPage",value:(t=tt(Ze().m((function n(){var e,t,r,o,a,i,s,c,l,u,d=this;return Ze().w((function(n){for(;;)switch(n.n){case 0:if(n.p=0,e=ne.parseActiveUrlWithCombiner(),t=ne.parseActiveUrlWithoutCombiner(),console.log("🐛 App renderPage:",{currentHash:window.location.hash,parsedUrl:e,urlWithId:t,rawId:t.id}),!(r=Ke[e])&&e.includes("/detail/")?r=Ke["/detail/:id"]:r||(r=Ke["/"]),r){n.n=1;break}return console.error("Page not found for URL:",e),this._content.innerHTML='<div class="error-page">Halaman tidak ditemukan</div>',n.a(2);case 1:n.p=1,e.includes("/detail/")?(a=t.id?t.id.trim():null,console.log("🔧 App: Creating detail page with cleaned ID:",a),o="function"==typeof r?new r(a):r):o="function"==typeof r?new r:r,!o.render&&r.render&&(o=r),n.n=3;break;case 2:return n.p=2,c=n.v,console.error("Error creating page instance:",c),this._content.innerHTML='<div class="error-page">\n          <h2>Terjadi kesalahan pada aplikasi</h2>\n          <p>Tidak dapat membuat instance halaman: '.concat(c.message,'</p>\n          <button onclick="window.location.reload()">Coba Lagi</button>\n        </div>'),n.a(2);case 3:if("function"==typeof o.render){n.n=4;break}return console.error("Page does not have render function:",e),this._content.innerHTML='<div class="error-page">Halaman tidak valid</div>',n.a(2);case 4:if(console.log("Page found:",r.name||"unnamed"),i=localStorage.getItem("token"),s=this._publicRoutes.includes(e),console.log("Auth check:",{token:!!i,isPublicRoute:s}),i||s){n.n=5;break}return console.log("Redirecting to login page (not authenticated)"),window.location.hash="#/login",n.a(2);case 5:if(!i||"/login"!==e&&"/register"!==e){n.n=6;break}return console.log("Redirecting to home page (already authenticated)"),window.location.hash="#/",n.a(2);case 6:return n.p=6,n.n=7,Qe(tt(Ze().m((function n(){var e;return Ze().w((function(n){for(;;)switch(n.n){case 0:return n.p=0,console.log("Rendering page content..."),n.n=1,o.render();case 1:if(d._content.innerHTML=n.v,!o.afterRender){n.n=2;break}return console.log("Executing afterRender..."),n.n=2,o.afterRender();case 2:"function"==typeof window.initLogoutButton&&window.initLogoutButton(),d._content.focus(),console.log("Page rendered successfully"),n.n=4;break;case 3:n.p=3,e=n.v,console.error("Error rendering page:",e),d._content.innerHTML='<div class="error-page">\n              <h2>Terjadi kesalahan saat memuat halaman</h2>\n              <p>'.concat(e.message,'</p>\n              <button onclick="window.location.reload()">Coba Lagi</button>\n            </div>');case 4:return n.a(2)}}),n,null,[[0,3]])}))));case 7:n.n=9;break;case 8:n.p=8,l=n.v,console.error("Error in page rendering:",l),this._content.innerHTML='<div class="error-page">\n          <h2>Terjadi kesalahan pada halaman</h2>\n          <p>'.concat(l.message,'</p>\n          <button onclick="window.location.reload()">Coba Lagi</button>\n        </div>');case 9:n.n=11;break;case 10:n.p=10,u=n.v,console.error("Fatal error in app rendering:",u),this._content.innerHTML='<div class="error-page">\n        <h2>Terjadi kesalahan pada aplikasi</h2>\n        <p>'.concat(u.message,'</p>\n        <button onclick="window.location.reload()">Coba Lagi</button>\n      </div>');case 11:return n.a(2)}}),n,this,[[6,8],[1,2],[0,10]])}))),function(){return t.apply(this,arguments)})}],e&&rt(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,e,t}())({content:document.getElementById("mainContent")});function ht(n){var e=n.target.installing;e&&(console.log("🆕 New service worker installing..."),e.addEventListener("statechange",(function(){var n,t;"installed"===e.state&&navigator.serviceWorker.controller&&(console.log("🆕 New service worker available, waiting for user confirmation"),n=function(){sessionStorage.setItem("sw-update-confirmed","true"),e.postMessage({type:"SKIP_WAITING"})},(t=document.createElement("div")).id="sw-update-notification",t.innerHTML='\n    <div style="\n      position: fixed;\n      top: 20px;\n      right: 20px;\n      background: #4CAF50;\n      color: white;\n      padding: 15px 20px;\n      border-radius: 8px;\n      box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n      z-index: 10000;\n      max-width: 300px;\n      font-family: Inter, sans-serif;\n    ">\n      <div style="font-weight: 600; margin-bottom: 8px;">\n        ⚡ Update Tersedia\n      </div>\n      <div style="font-size: 14px; margin-bottom: 12px;">\n        Ada versi baru aplikasi. Perbarui sekarang?\n      </div>\n      <div>\n        <button id="sw-update-yes" style="\n          background: white;\n          color: #4CAF50;\n          border: none;\n          padding: 6px 12px;\n          border-radius: 4px;\n          margin-right: 8px;\n          cursor: pointer;\n          font-weight: 600;\n        ">Perbarui</button>\n        <button id="sw-update-later" style="\n          background: transparent;\n          color: white;\n          border: 1px solid white;\n          padding: 6px 12px;\n          border-radius: 4px;\n          cursor: pointer;\n        ">Nanti</button>\n      </div>\n    </div>\n  ',document.body.appendChild(t),t.querySelector("#sw-update-yes").addEventListener("click",(function(){document.body.removeChild(t),n()})),t.querySelector("#sw-update-later").addEventListener("click",(function(){document.body.removeChild(t)})),setTimeout((function(){document.body.contains(t)&&document.body.removeChild(t)}),1e4))})))}window.addEventListener("DOMContentLoaded",(function(){pt.renderPage();var n=document.getElementById("logoutButton");n&&n.addEventListener("click",(function(n){n.preventDefault(),console.log("Logout diklik"),confirm("Yakin ingin logout?")&&(localStorage.removeItem("token"),alert("Berhasil logout!"),window.location.hash="#/login")}))})),window.addEventListener("hashchange",(function(){pt.renderPage()})),window.debugSW={enable:function(){localStorage.setItem("force-enable-sw","true"),console.log("✅ SW force-enabled. Reloading..."),location.reload()},disable:function(){localStorage.removeItem("force-enable-sw"),navigator.serviceWorker.getRegistrations().then((function(n){n.forEach((function(n){console.log("🗑️ Unregistering SW:",n.scope),n.unregister()})),console.log("✅ SW disabled. Reloading..."),location.reload()}))},status:function(){console.log("📊 SW Status:",{environment:"production",forceEnabled:localStorage.getItem("force-enable-sw"),registered:navigator.serviceWorker.controller?"Yes":"No",registrations:navigator.serviceWorker.getRegistrations().then((function(n){return n.map((function(n){return n.scope}))}))})},cleanup:(ft=dt(at().m((function n(){var e,t;return at().w((function(n){for(;;)switch(n.n){case 0:return console.log("🧹 Emergency SW cleanup..."),localStorage.removeItem("force-enable-sw"),sessionStorage.clear(),n.n=1,navigator.serviceWorker.getRegistrations();case 1:return e=n.v,n.n=2,Promise.all(e.map((function(n){return n.unregister()})));case 2:return n.n=3,caches.keys();case 3:return t=n.v,n.n=4,Promise.all(t.map((function(n){return caches.delete(n)})));case 4:console.log("✅ Cleanup completed. Reloading..."),location.reload();case 5:return n.a(2)}}),n)}))),function(){return ft.apply(this,arguments)})};try{localStorage.getItem("force-enable-sw"),"serviceWorker"in navigator?window.swRegistrationInProgress?console.log("⏳ SW registration already in progress"):(window.swRegistrationInProgress=!0,window.addEventListener("load",dt(at().m((function n(){var e,t,r,o,a,i,s,c,l;return at().w((function(n){for(;;)switch(n.n){case 0:return n.p=0,n.n=1,navigator.serviceWorker.getRegistrations();case 1:e=n.v,t=!1,r=st(e),n.p=2,r.s();case 3:if((o=r.n()).done){n.n=6;break}if((a=o.value).scope===window.location.origin+"/"){n.n=5;break}return console.log("🧹 Cleaning up conflicting SW:",a.scope),n.n=4,a.unregister();case 4:t=!0;case 5:n.n=3;break;case 6:n.n=8;break;case 7:n.p=7,c=n.v,r.e(c);case 8:return n.p=8,r.f(),n.f(8);case 9:if(!t){n.n=10;break}return n.n=10,new Promise((function(n){return setTimeout(n,1e3)}));case 10:return n.n=11,navigator.serviceWorker.register("/service-worker.js",{scope:"/",updateViaCache:"none"});case 11:i=n.v,console.log("✅ Service Worker registered successfully:",i.scope),i.addEventListener("updatefound",ht),s=!1,navigator.serviceWorker.addEventListener("controllerchange",(function(){s||(s=!0,console.log("🔄 Service Worker controller changed"),"true"===sessionStorage.getItem("sw-update-confirmed")&&(sessionStorage.removeItem("sw-update-confirmed"),console.log("🔄 Reloading after SW update..."),window.location.reload()))})),n.n=13;break;case 12:n.p=12,l=n.v,console.error("❌ Service Worker registration failed:",l);case 13:return n.p=13,window.swRegistrationInProgress=!1,n.f(13);case 14:return n.a(2)}}),n,null,[[2,7,8,9],[0,12,13,14]])}))))):console.log("❌ Service Worker not supported")}catch(n){console.error("❌ Failed to initialize SW registration:",n)}null===($e=document.getElementById("enablePush"))||void 0===$e||$e.addEventListener("click",dt(at().m((function n(){var e,t,r,o,a,i;return at().w((function(n){for(;;)switch(n.n){case 0:if(n.p=0,"serviceWorker"in navigator){n.n=1;break}return alert("Service Worker tidak didukung browser ini!"),n.a(2);case 1:return n.n=2,Notification.requestPermission();case 2:if("granted"===n.v){n.n=3;break}return alert("Izin notifikasi ditolak"),n.a(2);case 3:return n.n=4,navigator.serviceWorker.ready;case 4:return e=n.v,n.n=5,fetch("https://story-api.dicoding.dev/v1/notifications/key");case 5:return t=n.v,n.n=6,t.json();case 6:return r=n.v,o=r.data.publicKey,n.n=7,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:(c=o,void 0,void 0,void 0,l="=".repeat((4-c.length%4)%4),u=(c+l).replace(/-/g,"+").replace(/_/g,"/"),d=window.atob(u),Uint8Array.from((s=d,function(n){if(Array.isArray(n))return lt(n)}(s)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(s)||ct(s)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(n){return n.charCodeAt(0)}))))});case 7:return a=n.v,n.n=8,fetch("https://story-api.dicoding.dev/v1/notifications/subscribe",{method:"POST",headers:{Authorization:"Bearer ".concat(k()),"Content-Type":"application/json"},body:JSON.stringify(a)});case 8:alert("Notifikasi berhasil diaktifkan!"),n.n=10;break;case 9:n.p=9,i=n.v,console.error("❌ Push notification setup failed:",i),alert("Gagal mengaktifkan notifikasi: "+i.message);case 10:return n.a(2)}var s,c,l,u,d}),n,null,[[0,9]])}))))}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={id:n,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}r.m=e,n=[],r.O=(e,t,o,a)=>{if(!t){var i=1/0;for(u=0;u<n.length;u++){for(var[t,o,a]=n[u],s=!0,c=0;c<t.length;c++)(!1&a||i>=a)&&Object.keys(r.O).every((n=>r.O[n](t[c])))?t.splice(c--,1):(s=!1,a<i&&(i=a));if(s){n.splice(u--,1);var l=o();void 0!==l&&(e=l)}}return e}a=a||0;for(var u=n.length;u>0&&n[u-1][2]>a;u--)n[u]=n[u-1];n[u]=[t,o,a]},r.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return r.d(e,{a:e}),e},r.d=(n,e)=>{for(var t in e)r.o(e,t)&&!r.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},r.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),r.p="/",(()=>{r.b=document.baseURI||self.location.href;var n={792:0};r.O.j=e=>0===n[e];var e=(e,t)=>{var o,a,[i,s,c]=t,l=0;if(i.some((e=>0!==n[e]))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(c)var u=c(r)}for(e&&e(t);l<i.length;l++)a=i[l],r.o(n,a)&&n[a]&&n[a][0](),n[a]=0;return r.O(u)},t=self.webpackChunkstory_app=self.webpackChunkstory_app||[];t.forEach(e.bind(null,0)),t.push=e.bind(null,t.push.bind(t))})(),r.nc=void 0;var o=r.O(void 0,[924,172,270,328],(()=>r(470)));o=r.O(o)})();